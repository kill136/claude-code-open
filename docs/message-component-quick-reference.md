# Message ç»„ä»¶ - å¿«é€Ÿå‚è€ƒ

## åŸºç¡€ç”¨æ³•

```tsx
import { Message } from './ui/components/Message';

// ç®€å•æ¶ˆæ¯
<Message role="user" content="ä½ å¥½" />
<Message role="assistant" content="ä½ å¥½ï¼" />

// å¸¦æ—¶é—´æˆ³
<Message
  role="assistant"
  content="æ¶ˆæ¯å†…å®¹"
  timestamp={new Date()}
/>

// æµå¼æ¸²æŸ“
<Message
  role="assistant"
  content="æµå¼æ¸²æŸ“çš„æ–‡æœ¬..."
  streaming={true}
  streamSpeed={20}
/>
```

## å±æ€§é€ŸæŸ¥

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `role` | `'user' \| 'assistant' \| 'system' \| 'error'` | - | æ¶ˆæ¯è§’è‰²ï¼ˆå¿…éœ€ï¼‰ |
| `content` | `string \| ContentBlock[]` | - | æ¶ˆæ¯å†…å®¹ï¼ˆå¿…éœ€ï¼‰ |
| `timestamp` | `Date` | `undefined` | æ¶ˆæ¯æ—¶é—´æˆ³ |
| `streaming` | `boolean` | `false` | å¯ç”¨æµå¼æ¸²æŸ“ |
| `streamSpeed` | `number` | `20` | æµå¼é€Ÿåº¦ï¼ˆms/å­—ç¬¦ï¼‰ |
| `showCopyHint` | `boolean` | `false` | æ˜¾ç¤ºå¤åˆ¶æç¤º |
| `model` | `string` | `undefined` | æ¨¡å‹åç§° |
| `onComplete` | `() => void` | `undefined` | å®Œæˆå›è°ƒ |

## è§’è‰²é¢œè‰²

- ğŸ”µ `user` â†’ è“è‰² "You"
- ğŸŸ¢ `assistant` â†’ ç»¿è‰² "Claude"
- ğŸ”´ `error` â†’ çº¢è‰² "Error"
- ğŸ”· `system` â†’ é’è‰² "System"

## Markdown æ”¯æŒ

```tsx
<Message role="assistant" content={`
# æ ‡é¢˜ 1
## æ ‡é¢˜ 2

- åˆ—è¡¨é¡¹ 1
- åˆ—è¡¨é¡¹ 2

\`\`\`javascript
const code = "highlighted";
\`\`\`
`} />
```

## å·¥å…·è°ƒç”¨

```tsx
<Message
  role="assistant"
  content={[
    { type: 'text', text: 'ä½¿ç”¨å·¥å…·...' },
    {
      type: 'tool_use',
      name: 'Read',
      input: { file_path: '/path' }
    },
    {
      type: 'tool_result',
      content: 'ç»“æœ...'
    }
  ]}
/>
```

## å¸¸è§åœºæ™¯

### 1. æ˜¾ç¤ºä»£ç 
```tsx
content={\`
çœ‹è¿™æ®µä»£ç ï¼š

\\\`\\\`\\\`python
def hello():
    print("ä¸–ç•Œ")
\\\`\\\`\\\`
\`}
```

### 2. é”™è¯¯æç¤º
```tsx
<Message
  role="error"
  content="è¿æ¥å¤±è´¥ï¼šè¯·æ£€æŸ¥ç½‘ç»œ"
/>
```

### 3. ç³»ç»Ÿé€šçŸ¥
```tsx
<Message
  role="system"
  content="ä¼šè¯å·²ä¿å­˜"
/>
```

### 4. å®æ—¶è¾“å‡º
```tsx
const [text, setText] = useState('');

// API æµå¼å“åº”
stream.on('data', chunk => {
  setText(prev => prev + chunk);
});

<Message
  role="assistant"
  content={text}
  streaming={true}
  onComplete={() => saveMessage(text)}
/>
```

## æ ·å¼é¢„è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ You 14:30:25                        â”‚
â”‚   ä½ å¥½ï¼ŒClaudeï¼                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Claude (claude-sonnet-4) 14:30:27 â‹¯â”‚
â”‚   ä½ å¥½ï¼è¿™æ˜¯ä»£ç ç¤ºä¾‹ï¼š               â”‚
â”‚                                     â”‚
â”‚   typescript                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ const x = 42;             â”‚   â”‚
â”‚   â”‚ console.log(x);           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚   â€¢ åˆ—è¡¨é¡¹ 1                        â”‚
â”‚   â€¢ åˆ—è¡¨é¡¹ 2                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ System 14:30:30                     â”‚
â”‚   æ“ä½œæˆåŠŸå®Œæˆ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Error 14:30:35                      â”‚
â”‚   ç½‘ç»œè¿æ¥å¤±è´¥                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ€§èƒ½æç¤º

1. **é•¿æ¶ˆæ¯**: å·¥å…·è¾“å…¥/è¾“å‡ºè‡ªåŠ¨æˆªæ–­åˆ° 200 å­—ç¬¦
2. **æµå¼é€Ÿåº¦**: æ¨è 10-30msï¼Œå¤ªå¿«æˆ–å¤ªæ…¢éƒ½ä¸å¥½
3. **æ‰¹é‡æ¶ˆæ¯**: è€ƒè™‘ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼ˆæœªå®ç°ï¼‰

## è°ƒè¯•

```tsx
// æŸ¥çœ‹æ¸²æŸ“è¿›åº¦
<Message
  streaming={true}
  content="æµ‹è¯•..."
  onComplete={() => console.log('å®Œæˆï¼')}
/>

// æŸ¥çœ‹å·¥å…·è°ƒç”¨
<Message
  content={[
    { type: 'tool_use', name: 'Debug', input: {...} }
  ]}
/>
```

## æ³¨æ„äº‹é¡¹

âš ï¸ **é™åˆ¶**:
- Markdown ä»…æ”¯æŒåŸºç¡€è¯­æ³•
- ä»£ç é«˜äº®ä»…å•è‰²ï¼ˆé»„è‰²ï¼‰
- å›¾ç‰‡ä»…æ˜¾ç¤ºæ–‡æœ¬å ä½ç¬¦
- å¤åˆ¶ä¾èµ–ç»ˆç«¯åŠŸèƒ½

âœ… **æ¨è**:
- ä½¿ç”¨ `streaming` æå‡ç”¨æˆ·ä½“éªŒ
- ä¸ºé‡è¦æ¶ˆæ¯æ·»åŠ  `timestamp`
- é”™è¯¯ä½¿ç”¨ `role="error"`
- ç³»ç»Ÿé€šçŸ¥ä½¿ç”¨ `role="system"`

## ç›¸å…³æ–‡æ¡£

- ğŸ“˜ è¯¦ç»†æ–‡æ¡£: `docs/message-component-usage.md`
- ğŸ¨ å¢å¼ºæŠ¥å‘Š: `docs/message-component-enhancement.md`
- ğŸ§ª æ¼”ç¤ºç¨‹åº: `examples/message-demo.tsx`

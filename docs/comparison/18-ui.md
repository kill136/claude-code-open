# UI ç»„ä»¶åŠŸèƒ½ç‚¹å¯¹æ¯”åˆ†æ (T213-T227)

> å¯¹æ¯”æœ¬é¡¹ç›®å®ç°ä¸å®˜æ–¹ @anthropic-ai/claude-code v2.0.76 åŒ…çš„ UI ç»„ä»¶å·®å¼‚

## æ¦‚è¿°

å®˜æ–¹ Claude Code ä½¿ç”¨ **React + Ink** æ¡†æ¶æ„å»ºå®Œæ•´çš„ç»ˆç«¯ UI ç•Œé¢ï¼Œæä¾›ä¸°å¯Œçš„äº¤äº’ç»„ä»¶å’Œè§†è§‰åé¦ˆã€‚é€šè¿‡å¯¹å®˜æ–¹æ‰“åŒ…æ–‡ä»¶ (cli.js, 11MB) çš„åˆ†æï¼Œå‘ç°å¤§é‡ä½¿ç”¨äº† UI ç»„ä»¶ï¼ˆMessage: 1645æ¬¡, Header: 702æ¬¡, Input: 559æ¬¡ç­‰ï¼‰ã€‚

æœ¬é¡¹ç›®åœ¨ `/src/ui/` ç›®å½•ä¸‹å®ç°äº† 22 ä¸ª TypeScript/TSX æ–‡ä»¶ï¼Œå®Œæ•´å¤åˆ»äº†å®˜æ–¹çš„ UI ä½“éªŒã€‚

---

## T213: React + Ink æ¡†æ¶ âœ…

### å®˜æ–¹å®ç°
- **æŠ€æœ¯æ ˆ**: React 18 + Ink 4.x
- **æ‰“åŒ…æ–¹å¼**: å•æ–‡ä»¶ bundle (cli.js, 11MB)
- **ç»„ä»¶åŒ–**: å¤§é‡å‡½æ•°å¼ç»„ä»¶ (React.FC)
- **æ¸²æŸ“å¼•æ“**: Ink çš„è™šæ‹Ÿ DOM â†’ ç»ˆç«¯è¾“å‡º
- **çŠ¶æ€ç®¡ç†**: React Hooks (useState, useEffect, useInput)

```bash
# ä»å®˜æ–¹åŒ…æ£€æµ‹åˆ°çš„ Ink å¯¼å…¥
grep -o "ink" node_modules/@anthropic-ai/claude-code/cli.js | wc -l
# è¾“å‡º: 20+ æ¬¡å¯¼å…¥
```

### æœ¬é¡¹ç›®å®ç° âœ…
**ä½ç½®**: `/src/ui/index.tsx`, `/src/ui/App.tsx`

```typescript
// src/ui/index.tsx
import React from 'react';
import { render } from 'ink';
import { App } from './App.js';

export function renderApp(options: RenderOptions): void {
  render(<App model={options.model} ... />);
}

// src/ui/App.tsx
import { Box, Text, useApp, useInput } from 'ink';

export const App: React.FC<AppProps> = ({ model, initialPrompt, ... }) => {
  const { exit } = useApp();
  const [messages, setMessages] = useState<MessageItem[]>([]);
  const [toolCalls, setToolCalls] = useState<ToolCallItem[]>([]);

  useInput((input, key) => {
    if (key.ctrl && input === 'c') exit();
    if (input === '?') setShowShortcuts(prev => !prev);
  });

  return (
    <Box flexDirection="column" height="100%">
      <Header ... />
      <Message ... />
      <Input ... />
    </Box>
  );
};
```

**å¯¹æ¯”ç»“æœ**:
- âœ… **å®Œå…¨ä¸€è‡´**: ä½¿ç”¨ React 18.2.0 + Ink 4.x
- âœ… **ç»„ä»¶åŒ–**: 15+ ä¸ªç‹¬ç«‹ç»„ä»¶ï¼Œä¸å®˜æ–¹é£æ ¼ä¸€è‡´
- âœ… **çŠ¶æ€ç®¡ç†**: ä½¿ç”¨ Hooks ç®¡ç†æ¶ˆæ¯ã€å·¥å…·è°ƒç”¨ã€å¾…åŠäº‹é¡¹ç­‰
- âœ… **çƒ­é”®æ”¯æŒ**: useInput hook å¤„ç†å…¨å±€å¿«æ·é”® (?, Ctrl+C, Escape)

---

## T214: è¾“å…¥æ¡†ç»„ä»¶ âœ…

### å®˜æ–¹å®ç°
- **ç»„ä»¶å**: Input
- **åŠŸèƒ½**:
  - å‘½ä»¤è¡Œè¾“å…¥ + æç¤ºç¬¦
  - å†å²è®°å½•å¯¼èˆª (â†‘/â†“)
  - Tab è‡ªåŠ¨è¡¥å…¨ (æ–œæ å‘½ä»¤)
  - Vim æ¨¡å¼æ”¯æŒ (å¯é€‰)
  - å…‰æ ‡æ¸²æŸ“ (åè‰²å—)
  - å»ºè®®æ–‡æœ¬æç¤º

### æœ¬é¡¹ç›®å®ç° âœ…
**ä½ç½®**: `/src/ui/components/Input.tsx` (556 è¡Œ)

```typescript
export const Input: React.FC<InputProps> = ({
  prompt = '> ',
  onSubmit,
  disabled = false,
  suggestion,
}) => {
  const [value, setValue] = useState('');
  const [cursor, setCursor] = useState(0);
  const [history, setHistory] = useState<string[]>([]);
  const [vimModeEnabled, setVimModeEnabled] = useState(false);
  const [vimNormalMode, setVimNormalMode] = useState(false);

  // æ–œæ å‘½ä»¤è‡ªåŠ¨è¡¥å…¨
  const filteredCommands = useMemo(() => {
    if (!value.startsWith('/')) return [];
    const query = value.slice(1).toLowerCase();
    return ALL_COMMANDS.filter(cmd =>
      cmd.name.startsWith(query) ||
      cmd.aliases?.some(alias => alias.startsWith(query))
    ).slice(0, 10);
  }, [value]);

  // Vim æ¨¡å¼é”®ç»‘å®š
  useInput((input, key) => {
    if (vimNormalMode) {
      if (input === 'i') setVimNormalMode(false); // è¿›å…¥æ’å…¥æ¨¡å¼
      if (input === 'h') setCursor(prev => Math.max(0, prev - 1));
      if (input === 'l') setCursor(prev => Math.min(value.length - 1, prev + 1));
      if (input === 'w') setCursor(findNextWordStart(value, cursor));
      if (input === 'x') deleteChar();
      // ... æ›´å¤š vim å‘½ä»¤
    } else {
      if (key.escape) setVimNormalMode(true); // è¿›å…¥ normal æ¨¡å¼
      if (key.upArrow) navigateHistory(-1);
      if (key.tab) autocompleteCommand();
      // ... æ ‡å‡†ç¼–è¾‘
    }
  });

  return (
    <Box flexDirection="column">
      {/* å‘½ä»¤åˆ—è¡¨æ‚¬æµ®æ¡† */}
      {filteredCommands.length > 0 && (
        <Box flexDirection="column">
          {filteredCommands.map((cmd, i) => (
            <Text key={cmd.name}
              backgroundColor={i === selectedIndex ? 'gray' : undefined}>
              /{cmd.name} - {cmd.description}
            </Text>
          ))}
        </Box>
      )}

      {/* è¾“å…¥è¡Œ */}
      <Box>
        {vimModeEnabled && <Text color="yellow">[N] </Text>}
        <Text>{prompt}</Text>
        <Text>{value.slice(0, cursor)}</Text>
        <Text backgroundColor="gray">{value[cursor] || ' '}</Text>
        <Text>{value.slice(cursor + 1)}</Text>
      </Box>
    </Box>
  );
};
```

**äº®ç‚¹åŠŸèƒ½**:
1. **Vim æ¨¡å¼**:
   - Normal æ¨¡å¼: h/j/k/l å¯¼èˆª, w/b/e å•è¯è·³è½¬, x/d/dd åˆ é™¤, u æ’¤é”€
   - Insert æ¨¡å¼: Escape æˆ– Ctrl+[ é€€å‡º
   - ç¯å¢ƒå˜é‡æ§åˆ¶: `CLAUDE_CODE_VIM_MODE=true`

2. **æ–œæ å‘½ä»¤è¡¥å…¨**:
   - 65+ å†…ç½®å‘½ä»¤ (/help, /clear, /model, /plan...)
   - å®æ—¶è¿‡æ»¤ + åˆ«ååŒ¹é…
   - Tab è¡¥å…¨ + ä¸Šä¸‹é”®å¯¼èˆª

3. **å†å²è®°å½•**:
   - ä¿ç•™æœ€è¿‘ 100 æ¡
   - â†‘/â†“ é”®å¯¼èˆª
   - æŒ‰ Esc æ¸…ç©ºå½“å‰è¾“å…¥

**å¯¹æ¯”ç»“æœ**:
- âœ… **åŠŸèƒ½è¶…è¶Š**: æœ¬é¡¹ç›®å®ç°äº†å®Œæ•´çš„ Vim æ¨¡å¼ï¼Œå®˜æ–¹å¯èƒ½æœªå®Œå…¨å®ç°
- âœ… **å‘½ä»¤è¡¥å…¨**: æ”¯æŒ 65+ å‘½ä»¤çš„å®æ—¶è¡¥å…¨
- âœ… **å…‰æ ‡æ¸²æŸ“**: ä¸å®˜æ–¹ä¸€è‡´çš„åè‰²å—å…‰æ ‡
- âš ï¸  **ç»†èŠ‚å·®å¼‚**: å®˜æ–¹å¯èƒ½æœ‰æ›´å¤š Emacs é£æ ¼å¿«æ·é”®

---

## T215: æ¶ˆæ¯å±•ç¤ºç»„ä»¶ âœ…

### å®˜æ–¹å®ç°
- **ç»„ä»¶å**: Message
- **ä½¿ç”¨é¢‘ç‡**: 1645 æ¬¡ï¼ˆå®˜æ–¹åŒ…ä¸­å‡ºç°æœ€å¤šï¼‰
- **åŠŸèƒ½**:
  - åŒºåˆ†è§’è‰² (user/assistant/system/error)
  - Markdown è§£ææ¸²æŸ“
  - æµå¼æ‰“å­—æ•ˆæœ
  - ä»£ç å—é«˜äº®
  - æ—¶é—´æˆ³æ˜¾ç¤º

### æœ¬é¡¹ç›®å®ç° âœ…
**ä½ç½®**: `/src/ui/components/Message.tsx` (389 è¡Œ)

```typescript
export const Message: React.FC<MessageProps> = ({
  role,
  content,
  timestamp,
  streaming = false,
  streamSpeed = 20,
  model,
}) => {
  const [displayedContent, setDisplayedContent] = useState('');
  const [isStreaming, setIsStreaming] = useState(streaming);

  // æµå¼æ¸²æŸ“æ•ˆæœ
  useEffect(() => {
    if (!streaming) return;
    let currentIndex = 0;
    const interval = setInterval(() => {
      if (currentIndex < content.length) {
        const increment = Math.min(Math.random() * 3 + 1, content.length - currentIndex);
        currentIndex += increment;
        setDisplayedContent(content.slice(0, currentIndex));
      } else {
        clearInterval(interval);
        setIsStreaming(false);
      }
    }, streamSpeed);
    return () => clearInterval(interval);
  }, [content, streaming]);

  // Markdown è§£æ
  const blocks = parseMarkdownForTerminal(displayedContent);

  return (
    <Box flexDirection="column" marginY={1}>
      {/* æ¶ˆæ¯å¤´éƒ¨ */}
      <Box>
        <Text bold color={getRoleColor()}>
          {role === 'user' ? 'You' : `Claude (${model})`}
        </Text>
        <Text color="gray"> {timestamp.toLocaleTimeString()}</Text>
        {isStreaming && <Text color="gray"> â‹¯</Text>}
      </Box>

      {/* æ¶ˆæ¯å†…å®¹ */}
      <Box flexDirection="column" marginLeft={2}>
        {blocks.map((block, i) => {
          if (block.type === 'code') {
            return <CodeBlock key={i} content={block.content} language={block.language} />;
          } else if (block.type === 'heading') {
            return <Text key={i} bold color="cyan" underline={block.level === 1}>
              {block.content}
            </Text>;
          } else if (block.type === 'list') {
            return <Box key={i}><Text color="yellow">â€¢ </Text><Text>{block.content}</Text></Box>;
          } else {
            return <Text key={i}>{block.content}</Text>;
          }
        })}
      </Box>
    </Box>
  );
};

// ä»£ç å—ç»„ä»¶
const CodeBlock: React.FC<{ content: string; language?: string }> = ({ content, language }) => {
  return (
    <Box flexDirection="column" marginY={1}>
      {language && <Text color="cyan" dimColor>{language}</Text>}
      <Box borderStyle="single" borderColor="gray" paddingX={1}>
        {content.split('\n').map((line, i) => (
          <Text key={i} color="yellow">{line}</Text>
        ))}
      </Box>
    </Box>
  );
};
```

**Markdown æ”¯æŒ**:
- âœ… ä»£ç å—: \`\`\`language\n...\`\`\`
- âœ… æ ‡é¢˜: # H1, ## H2, ...
- âœ… åˆ—è¡¨: - item, * item, + item
- âœ… è¡Œå†…ä»£ç : \`code\` (åŸºç¡€æ”¯æŒ)
- âš ï¸  ä¸æ”¯æŒè¡¨æ ¼ã€å›¾ç‰‡ã€é“¾æ¥ç­‰å¤æ‚å…ƒç´ 

**å¯¹æ¯”ç»“æœ**:
- âœ… **æµå¼æ¸²æŸ“**: æ¨¡æ‹Ÿæ‰“å­—æ•ˆæœï¼Œé€Ÿåº¦å¯é…ç½®
- âœ… **Markdown**: æ”¯æŒå¸¸ç”¨è¯­æ³•
- âœ… **ä»£ç å—**: å¸¦è¾¹æ¡† + è¯­è¨€æ ‡ç­¾
- âš ï¸  **è¯­æ³•é«˜äº®**: ä½¿ç”¨ç®€å•çš„é¢œè‰²åŒºåˆ†ï¼Œæœªä½¿ç”¨ Prism/Shiki

---

## T216: å·¥å…·è°ƒç”¨å±•ç¤º âœ…

### å®˜æ–¹å®ç°
- **ç»„ä»¶å**: ToolCall
- **åŠŸèƒ½**:
  - æ˜¾ç¤ºå·¥å…·åç§° + çŠ¶æ€å›¾æ ‡
  - è¾“å…¥å‚æ•°æ ¼å¼åŒ–
  - è¾“å‡ºç»“æœå±•ç¤º
  - Diff è§†å›¾ï¼ˆæ–‡ä»¶ä¿®æ”¹ï¼‰
  - æ‰§è¡Œæ—¶é•¿ç»Ÿè®¡

### æœ¬é¡¹ç›®å®ç° âœ…
**ä½ç½®**: `/src/ui/components/ToolCall.tsx` (435 è¡Œ)

```typescript
export const ToolCall: React.FC<ToolCallProps> = ({
  name,
  status, // 'running' | 'success' | 'error'
  input,
  result,
  error,
  duration,
}) => {
  const [isExpanded, setIsExpanded] = useState(false);

  const getStatusIcon = () => {
    switch (status) {
      case 'running': return <Spinner />;
      case 'success': return <Text color="green">âœ“</Text>;
      case 'error': return <Text color="red">âœ—</Text>;
    }
  };

  return (
    <Box flexDirection="column" marginLeft={1}>
      {/* çŠ¶æ€è¡Œ */}
      <Box>
        {getStatusIcon()}
        <Text color={getStatusColor()} bold> {name}</Text>
        {duration && <Text color="gray"> ({formatDuration(duration)})</Text>}
      </Box>

      {/* è¾“å…¥å‚æ•°ï¼ˆæ™ºèƒ½æ ¼å¼åŒ–ï¼‰*/}
      <Box marginLeft={2}>
        <InputDisplay input={input} toolName={name} />
      </Box>

      {/* è¾“å‡ºç»“æœ */}
      {result && (
        containsDiff(result)
          ? <DiffView output={result} />  // Diff ç‰¹æ®Šæ¸²æŸ“
          : <OutputDisplay output={result} expanded={isExpanded} />
      )}

      {/* é”™è¯¯ä¿¡æ¯ */}
      {error && <ErrorDisplay error={error} />}
    </Box>
  );
};

// æ™ºèƒ½è¾“å…¥æ ¼å¼åŒ–
const InputDisplay: React.FC = ({ input, toolName }) => {
  switch (toolName) {
    case 'Edit':
    case 'MultiEdit':
      return (
        <Box>
          <Text color="gray">File: <Text color="cyan">{input.file_path}</Text></Text>
          <Text color="gray" dimColor>Replacing {input.old_string.length} chars...</Text>
        </Box>
      );
    case 'Bash':
      return <Text color="gray">$ <Text color="yellow">{input.command}</Text></Text>;
    case 'Grep':
      return <Text color="gray">Pattern: <Text color="magenta">{input.pattern}</Text></Text>;
    default:
      return <Text color="gray">{JSON.stringify(input)}</Text>;
  }
};

// Diff è§†å›¾æ¸²æŸ“
const DiffView: React.FC = ({ output }) => {
  const sections = extractDiffSections(output);
  return (
    <Box flexDirection="column" marginLeft={2}>
      {sections.map((section, i) => {
        const parsed = parseDiffLine(section.content);
        return <Text key={i} color={parsed.color}>{parsed.text}</Text>;
      })}
    </Box>
  );
};
```

**ç‰¹æ®Šå¤„ç†**:
- **Edit/Write**: åªæ˜¾ç¤ºæ–‡ä»¶è·¯å¾„ + æ”¹åŠ¨å¤§å°
- **Bash**: æ˜¾ç¤ºå‘½ä»¤ + è¾“å‡ºå‰ 10 è¡Œ
- **Grep/Glob**: é«˜äº®æœç´¢æ¨¡å¼
- **Diff**: çº¢ç»¿è‰²æ ‡è®° +/-

**å¯¹æ¯”ç»“æœ**:
- âœ… **çŠ¶æ€å±•ç¤º**: è¿è¡Œä¸­ Spinner + æˆåŠŸ/å¤±è´¥å›¾æ ‡
- âœ… **Diff æ¸²æŸ“**: è§£æ +++ --- @@ æ ‡è®°ï¼Œå½©è‰²è¾“å‡º
- âœ… **æ™ºèƒ½æ ¼å¼åŒ–**: é’ˆå¯¹ä¸åŒå·¥å…·ä¼˜åŒ–æ˜¾ç¤º
- âš ï¸  **å±•å¼€æŠ˜å **: é•¿è¾“å‡ºå¯å±•å¼€ï¼Œä½†äº¤äº’æ€§å¯èƒ½ä¸å¦‚å®˜æ–¹

---

## T217: Markdown æ¸²æŸ“ âœ…

### å®˜æ–¹å®ç°
- **åº“**: å¯èƒ½ä½¿ç”¨ `marked` æˆ– `ink-markdown`
- **æ”¯æŒ**: æ ‡é¢˜ã€åˆ—è¡¨ã€ä»£ç å—ã€ç²—ä½“ã€æ–œä½“
- **é™åˆ¶**: ç»ˆç«¯ç¯å¢ƒä¸‹ä¸æ”¯æŒå›¾ç‰‡ã€è¡¨æ ¼

### æœ¬é¡¹ç›®å®ç° âœ…
**ä½ç½®**: `/src/ui/components/Message.tsx` (Markdown è§£æå‡½æ•°)

```typescript
function parseMarkdownForTerminal(markdown: string) {
  const blocks = [];

  // è§£æä»£ç å—
  const codeBlockRegex = /```(\w+)?\n([\s\S]*?)```/g;
  let match;
  while ((match = codeBlockRegex.exec(markdown)) !== null) {
    blocks.push({
      type: 'code',
      content: match[2],
      language: match[1] || 'text',
    });
  }

  // è§£æå…¶ä»–æ–‡æœ¬å—
  const lines = remainingText.split('\n');
  for (const line of lines) {
    // æ ‡é¢˜: ## Title
    if (line.match(/^(#{1,6})\s+(.+)$/)) {
      blocks.push({ type: 'heading', content, level });
    }
    // åˆ—è¡¨: - item
    else if (line.match(/^[\s]*[-*+]\s+(.+)$/)) {
      blocks.push({ type: 'list', content });
    }
    // æ™®é€šæ–‡æœ¬
    else {
      blocks.push({ type: 'text', content: line });
    }
  }

  return blocks;
}
```

**æ¸²æŸ“æ•ˆæœ**:
```
# Heading 1
â”â”â”â”â”â”â”â”â”â”â”â”â”â”  (cyan + underline)

## Heading 2
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  (cyan + bold)

- List item 1
â€¢ List item 2    (yellow bullet)

`inline code`    (yellow text)

```javascript
function foo() {}  (bordered box + language label)
```
```

**å¯¹æ¯”ç»“æœ**:
- âœ… **åŸºç¡€è¯­æ³•**: æ ‡é¢˜ã€åˆ—è¡¨ã€ä»£ç å—
- âœ… **ç»ˆç«¯å‹å¥½**: ä½¿ç”¨ ANSI é¢œè‰²å’Œ Unicode å­—ç¬¦
- âš ï¸  **åŠŸèƒ½ç¼ºå¤±**: ä¸æ”¯æŒè¡¨æ ¼ã€å¼•ç”¨ã€é“¾æ¥ã€å›¾ç‰‡
- âš ï¸  **è¡Œå†…æ ·å¼**: ä¸æ”¯æŒ **ç²—ä½“** å’Œ *æ–œä½“*

---

## T218: ä»£ç é«˜äº® âš ï¸

### å®˜æ–¹å®ç°
- **å¯èƒ½ä½¿ç”¨**: `shiki` æˆ– `prism` (éœ€ç¡®è®¤)
- **é«˜äº®**: å…³é”®å­—ã€å­—ç¬¦ä¸²ã€æ³¨é‡Šç­‰
- **è¯­è¨€**: æ”¯æŒ 100+ ç§è¯­è¨€

### æœ¬é¡¹ç›®å®ç° âš ï¸
**ä½ç½®**: `/src/ui/components/Message.tsx` (CodeBlock ç»„ä»¶)

```typescript
const CodeBlock: React.FC<{ content: string; language?: string }> = ({
  content,
  language,
}) => {
  return (
    <Box flexDirection="column" marginY={1}>
      {language && (
        <Text color="cyan" dimColor>{language}</Text>
      )}
      <Box borderStyle="single" borderColor="gray" paddingX={1}>
        {content.split('\n').map((line, i) => (
          <Text key={i} color="yellow">{line}</Text>  // âŒ ä»…å•è‰²æ˜¾ç¤º
        ))}
      </Box>
    </Box>
  );
};
```

**ç°çŠ¶**:
- âŒ **æ— è¯­æ³•é«˜äº®**: æ‰€æœ‰ä»£ç ç»Ÿä¸€æ˜¾ç¤ºä¸ºé»„è‰²
- âœ… **è¯­è¨€æ ‡ç­¾**: æ˜¾ç¤º ```language ä¸­çš„ language
- âœ… **è¾¹æ¡†**: ä½¿ç”¨ Ink borderStyle åŒºåˆ†ä»£ç å—

**æ”¹è¿›æ–¹å‘**:
```typescript
// å¯é›†æˆ shiki æˆ– prism
import { getHighlighter } from 'shiki';

const CodeBlock = async ({ content, language }) => {
  const highlighter = await getHighlighter({ theme: 'nord' });
  const tokens = highlighter.codeToThemedTokens(content, language);

  return (
    <Box>
      {tokens.map(line => (
        line.map(token => (
          <Text color={token.color}>{token.content}</Text>
        ))
      ))}
    </Box>
  );
};
```

**å¯¹æ¯”ç»“æœ**:
- âŒ **é«˜äº®ç¼ºå¤±**: æœ¬é¡¹ç›®æœªå®ç°è¯­æ³•é«˜äº®
- âœ… **ç»“æ„æ¸…æ™°**: ä½¿ç”¨è¾¹æ¡†å’Œæ ‡ç­¾åŒºåˆ†
- ğŸ”§ **å¾…å®ç°**: éœ€é›†æˆ shiki/prism åº“

---

## T219: Spinner ç»„ä»¶ âœ…

### å®˜æ–¹å®ç°
- **ç»„ä»¶å**: Spinner
- **ä½¿ç”¨é¢‘ç‡**: 19 æ¬¡
- **æ ·å¼**: æ—‹è½¬åŠ¨ç”» (dots/line/arc ç­‰)

### æœ¬é¡¹ç›®å®ç° âœ…
**ä½ç½®**: `/src/ui/components/Spinner.tsx` (206 è¡Œ)

```typescript
// å®šä¹‰ 11 ç§åŠ¨ç”»ç±»å‹
const SPINNER_TYPES = {
  dots: ['â ‹', 'â ™', 'â ¹', 'â ¸', 'â ¼', 'â ´', 'â ¦', 'â §', 'â ‡', 'â '],
  line: ['-', '\\', '|', '/'],
  arc: ['â—œ', 'â— ', 'â—', 'â—', 'â—¡', 'â—Ÿ'],
  circle: ['â—', 'â—“', 'â—‘', 'â—’'],
  dots2: ['â£¾', 'â£½', 'â£»', 'â¢¿', 'â¡¿', 'â£Ÿ', 'â£¯', 'â£·'],
  dots3: ['â ‹', 'â ™', 'â š', 'â ', 'â –', 'â ¦', 'â ´', 'â ²', 'â ³', 'â “'],
  bounce: ['â ', 'â ‚', 'â „', 'â ‚'],
  box: ['â––', 'â–˜', 'â–', 'â–—'],
  moon: ['ğŸŒ‘', 'ğŸŒ’', 'ğŸŒ“', 'ğŸŒ”', 'ğŸŒ•', 'ğŸŒ–', 'ğŸŒ—', 'ğŸŒ˜'],
  clock: ['ğŸ•', 'ğŸ•‘', 'ğŸ•’', 'ğŸ•“', 'ğŸ•”', 'ğŸ••', ...],
  bouncingBar: ['[    ]', '[=   ]', '[==  ]', ...],
  bouncingBall: ['( â—    )', '(  â—   )', ...],
};

export const Spinner: React.FC<SpinnerProps> = ({
  label,
  type = 'dots',
  color,
  status = 'loading',
  progress,
  showElapsed = false,
}) => {
  const [frame, setFrame] = useState(0);
  const [elapsed, setElapsed] = useState(0);

  const frames = SPINNER_TYPES[type];

  useEffect(() => {
    if (status !== 'loading') return;
    const timer = setInterval(() => {
      setFrame(prev => (prev + 1) % frames.length);
    }, 80);
    return () => clearInterval(timer);
  }, [status]);

  useEffect(() => {
    if (!showElapsed) return;
    const timer = setInterval(() => {
      setElapsed(Date.now() - startTime);
    }, 100);
    return () => clearInterval(timer);
  }, [showElapsed]);

  const icon = status === 'loading'
    ? frames[frame]
    : STATUS_ICONS[status]; // âœ“ âœ— âš  â„¹

  return (
    <Box>
      <Text color={color}>{icon}</Text>
      {label && <Text> {label}</Text>}
      {progress !== undefined && <Text> ({progress}%)</Text>}
      {showElapsed && <Text> [{formatElapsed(elapsed)}]</Text>}
    </Box>
  );
};

// å¤šä»»åŠ¡ Spinner
export const MultiSpinner: React.FC<MultiSpinnerProps> = ({ tasks }) => {
  return (
    <Box flexDirection="column">
      {tasks.map(task => (
        <Spinner key={task.id}
          label={task.label}
          status={task.status}
          progress={task.progress} />
      ))}
    </Box>
  );
};
```

**ç‰¹æ€§**:
- âœ… **11 ç§åŠ¨ç”»**: dots, line, arc, circle, moon, clock...
- âœ… **çŠ¶æ€å›¾æ ‡**: loading â†’ âœ“ (æˆåŠŸ) / âœ— (å¤±è´¥) / âš  (è­¦å‘Š)
- âœ… **è¿›åº¦ç™¾åˆ†æ¯”**: å¯é€‰æ˜¾ç¤º 0-100%
- âœ… **è®¡æ—¶å™¨**: æ˜¾ç¤ºç»è¿‡æ—¶é—´ (1s, 1m 30s...)
- âœ… **å¤šä»»åŠ¡**: MultiSpinner åŒæ—¶æ˜¾ç¤ºå¤šä¸ªåŠ è½½çŠ¶æ€

**å¯¹æ¯”ç»“æœ**:
- âœ… **æ ·å¼ä¸°å¯Œ**: 11 ç§åŠ¨ç”»ç±»å‹ï¼Œå®˜æ–¹å¯èƒ½åªæœ‰ 2-3 ç§
- âœ… **åŠŸèƒ½å®Œæ•´**: æ”¯æŒè¿›åº¦ã€è®¡æ—¶ã€å¤šä»»åŠ¡
- âœ… **æ€§èƒ½ä¼˜åŒ–**: ä½¿ç”¨ useEffect cleanup é¿å…å†…å­˜æ³„æ¼

---

## T220: è¿›åº¦æ¡ç»„ä»¶ âœ…

### å®˜æ–¹å®ç°
- **ç»„ä»¶å**: ProgressBar
- **ä½¿ç”¨é¢‘ç‡**: 11 æ¬¡
- **æ ·å¼**: å—çŠ¶è¿›åº¦æ¡

### æœ¬é¡¹ç›®å®ç° âœ…
**ä½ç½®**: `/src/ui/components/ProgressBar.tsx` (297 è¡Œ)

```typescript
// 4 ç§æ ·å¼çš„å­—ç¬¦é›†
const STYLE_CHARS = {
  blocks: {
    complete: 'â–ˆ',
    partial: ['', 'â–', 'â–', 'â–', 'â–Œ', 'â–‹', 'â–Š', 'â–‰'], // 8 çº§ç»†åˆ†
    incomplete: 'â–‘',
  },
  dots: {
    complete: 'â—',
    partial: ['â—‹', 'â—”', 'â—', 'â—•'],
    incomplete: 'â—‹',
  },
  arrows: {
    complete: 'â–¶',
    partial: ['â–·', 'â–·', 'â–¶', 'â–¶'],
    incomplete: 'â–·',
  },
  smooth: {
    complete: 'â”',
    partial: ['', 'â•¸', 'â•¸', 'â•¸'],
    incomplete: 'â”€',
  },
};

export const ProgressBar: React.FC<ProgressBarProps> = ({
  value = 0,
  max = 100,
  label,
  showPercentage = true,
  showETA = false,
  style = 'blocks',
  color = 'cyan',
  indeterminate = false, // ä¸ç¡®å®šè¿›åº¦æ¨¡å¼
  width = 40,
}) => {
  const percentage = (value / max) * 100;

  // è®¡ç®— ETA (é¢„è®¡å‰©ä½™æ—¶é—´)
  const eta = useMemo(() => {
    if (!showETA || indeterminate || percentage === 0) return null;
    const elapsed = Date.now() - startTime;
    const rate = percentage / elapsed;
    const remaining = (100 - percentage) / rate;
    return formatTime(remaining);
  }, [percentage, showETA]);

  // æ¸²æŸ“è¿›åº¦æ¡
  const renderProgressBar = () => {
    if (indeterminate) {
      // åŠ è½½åŠ¨ç”»: â—â—â—â—â—â—    â†’ ç§»åŠ¨
      return INDETERMINATE_FRAMES[animationFrame];
    }

    const chars = STYLE_CHARS[style];
    const filledWidth = (width * percentage) / 100;
    const completeCount = Math.floor(filledWidth);
    const partialIndex = Math.floor((filledWidth - completeCount) * chars.partial.length);
    const incompleteCount = width - completeCount - (partialIndex > 0 ? 1 : 0);

    let bar = '';
    bar += chars.complete.repeat(completeCount);              // â–ˆâ–ˆâ–ˆâ–ˆ
    bar += chars.partial[partialIndex] || '';                 // â–Œ (åŠæ ¼)
    bar += chars.incomplete.repeat(incompleteCount);          // â–‘â–‘â–‘
    return bar;
  };

  return (
    <Box flexDirection="column">
      {label && <Text>{label} {complete ? 'âœ“' : ''}</Text>}
      <Box>
        <Text color={color}>[{renderProgressBar()}]</Text>
        <Text color="gray"> {percentage.toFixed(0)}%</Text>
        {eta && <Text color="gray"> (ETA: {eta})</Text>}
      </Box>
    </Box>
  );
};

// å¤šè¿›åº¦æ¡
export const MultiProgressBar: React.FC<MultiProgressBarProps> = ({ bars }) => {
  return (
    <Box flexDirection="column">
      {bars.map(bar => (
        <ProgressBar key={bar.id}
          label={bar.label}
          value={bar.value}
          color={bar.color} />
      ))}
    </Box>
  );
};
```

**ç¤ºä¾‹è¾“å‡º**:
```
Downloading dependencies âœ“
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘] 75% (ETA: 2m 30s)

Building project
[â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”€â”€â”€â”€â”€] 80%

Testing
[â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—‹â—‹â—‹â—‹â—‹â—‹â—‹] 60%
```

**å¯¹æ¯”ç»“æœ**:
- âœ… **4 ç§æ ·å¼**: blocks, dots, arrows, smooth
- âœ… **8 çº§ç»†åˆ†**: ä½¿ç”¨ Unicode åŠæ ¼å­—ç¬¦å®ç°å¹³æ»‘è¿‡æ¸¡
- âœ… **ETA è®¡ç®—**: åŸºäºé€Ÿç‡è‡ªåŠ¨ä¼°ç®—å‰©ä½™æ—¶é—´
- âœ… **ä¸ç¡®å®šæ¨¡å¼**: ç”¨äºæœªçŸ¥è¿›åº¦çš„åŠ è½½åŠ¨ç”»
- âœ… **å¤šè¿›åº¦æ¡**: å¹¶è¡Œæ˜¾ç¤ºå¤šä¸ªä»»åŠ¡è¿›åº¦

---

## T221: æƒé™ç¡®è®¤å¯¹è¯æ¡† âœ…

### å®˜æ–¹å®ç°
- **ç»„ä»¶å**: PermissionPrompt
- **è§¦å‘åœºæ™¯**: æ‰§è¡Œå±é™©æ“ä½œ (æ–‡ä»¶ä¿®æ”¹ã€Bash å‘½ä»¤ã€ç½‘ç»œè¯·æ±‚)
- **é€‰é¡¹**: å…è®¸ä¸€æ¬¡ / æ‹’ç» / æœ¬æ¬¡ä¼šè¯å…è®¸ / æ°¸ä¹…å…è®¸/æ‹’ç»
- **è­¦å‘Š**: é«˜äº®å±é™©æ“ä½œ (rm, sudo, chmod...)

### æœ¬é¡¹ç›®å®ç° âœ…
**ä½ç½®**: `/src/ui/components/PermissionPrompt.tsx` (326 è¡Œ)

```typescript
export const PermissionPrompt: React.FC<PermissionPromptProps> = ({
  toolName,
  type, // 'file_write' | 'bash_command' | 'network_request' ...
  description,
  resource, // æ–‡ä»¶è·¯å¾„ã€å‘½ä»¤ã€URL
  details,
  onDecision,
}) => {
  const [selected, setSelected] = useState(0);

  // 5 ç§é€‰é¡¹
  const options = [
    { label: 'Yes, allow once', key: 'y', scope: 'once', allowed: true },
    { label: 'No, deny', key: 'n', scope: 'once', allowed: false },
    { label: 'Allow for this session', key: 's', scope: 'session', allowed: true },
    { label: 'Always allow (remember)', key: 'A', scope: 'always', allowed: true },
    { label: 'Never allow (remember)', key: 'N', scope: 'never', allowed: false },
  ];

  // åˆ¤æ–­æ˜¯å¦å±é™©
  const isDangerous = useMemo(() => {
    if (type === 'file_delete') return true;
    if (type === 'bash_command' && resource) {
      const dangerousCommands = ['rm', 'sudo', 'chmod', 'chown', 'mv', 'dd', 'mkfs'];
      return dangerousCommands.some(cmd => resource.trim().startsWith(cmd));
    }
    return false;
  }, [type, resource]);

  useInput((input, key) => {
    if (key.upArrow) setSelected(prev => Math.max(0, prev - 1));
    if (key.downArrow) setSelected(prev => Math.min(options.length - 1, prev + 1));
    if (key.return) {
      const option = options[selected];
      onDecision({
        allowed: option.allowed,
        scope: option.scope,
        remember: option.scope === 'always' || option.scope === 'never',
      });
    }
    // å¿«æ·é”®: y/n/s/A/N
    const option = options.find(o => o.key === input);
    if (option) onDecision({ ... });
  });

  return (
    <Box borderStyle="round" borderColor={isDangerous ? 'red' : 'yellow'} paddingX={2} paddingY={1}>
      {/* æ ‡é¢˜ */}
      <Text color={isDangerous ? 'red' : 'yellow'} bold>
        {isDangerous ? 'âš ï¸  DANGEROUS OPERATION - Permission Required' : 'ğŸ” Permission Required'}
      </Text>

      {/* å·¥å…·ç±»å‹ */}
      <Box marginTop={1}>
        <Text>{getTypeIcon(type)} </Text>
        <Text bold color={getTypeColor(type)}>{toolName}</Text>
        <Text color="gray"> ({getTypeLabel(type)})</Text>
      </Box>

      {/* æè¿° */}
      <Text marginLeft={2}>{description}</Text>

      {/* èµ„æº (æ–‡ä»¶è·¯å¾„/å‘½ä»¤/URL) */}
      {resource && (
        <Box marginTop={1}>
          <Text color="gray">{getResourceLabel(type)}: </Text>
          <Text color="cyan" bold>{formatResource(resource)}</Text>
        </Box>
      )}

      {/* å±é™©è­¦å‘Š */}
      {isDangerous && (
        <Box marginTop={1} paddingX={1} borderStyle="single" borderColor="red">
          <Text color="red" bold>âš ï¸  WARNING: This operation could be destructive!</Text>
        </Box>
      )}

      {/* é€‰é¡¹åˆ—è¡¨ */}
      <Box marginTop={2} flexDirection="column">
        {options.map((option, i) => (
          <Box key={option.key}>
            <Text color={i === selected ? 'cyan' : 'gray'}>
              {i === selected ? 'â¯ ' : '  '}
            </Text>
            <Text color={i === selected ? 'cyan' : 'white'} bold={i === selected}>
              [{option.key}] {option.label}
            </Text>
            {i === selected && option.description && (
              <Text color="gray" dimColor> - {option.description}</Text>
            )}
          </Box>
        ))}
      </Box>

      {/* æç¤º */}
      <Text color="gray" dimColor marginTop={1}>
        â†‘/â†“ to navigate Â· enter to select Â· or type shortcut key
      </Text>
    </Box>
  );
};
```

**æƒé™ç±»å‹å›¾æ ‡**:
```
ğŸ“– File Read
âœï¸  File Write
ğŸ—‘ï¸  File Delete
âš¡ Bash Command
ğŸŒ Network Request
ğŸ”Œ MCP Server
ğŸ“¦ Plugin Install
âš™ï¸  System Config
```

**å¯¹æ¯”ç»“æœ**:
- âœ… **5 ç§é€‰é¡¹**: ä¸€æ¬¡/æ‹’ç»/ä¼šè¯/æ°¸ä¹…å…è®¸/æ°¸ä¹…æ‹’ç»
- âœ… **å±é™©æ£€æµ‹**: è‡ªåŠ¨è¯†åˆ« rm/sudo ç­‰å‘½ä»¤
- âœ… **å¿«æ·é”®**: y/n/s/A/N å¿«é€Ÿå“åº”
- âœ… **è§†è§‰è­¦å‘Š**: çº¢è‰²è¾¹æ¡† + âš ï¸  å›¾æ ‡
- âœ… **èµ„æºæ˜¾ç¤º**: æ™ºèƒ½æ ¼å¼åŒ–æ–‡ä»¶è·¯å¾„/å‘½ä»¤/URL

---

## T222: Todo åˆ—è¡¨å±•ç¤º âœ…

### å®˜æ–¹å®ç°
- **ç»„ä»¶å**: TodoList
- **åŠŸèƒ½**:
  - ä¸‰ç§çŠ¶æ€: pending / in_progress / completed
  - åŠ¨æ€æè¿°: activeForm (è¿›è¡Œä¸­) vs content (å…¶ä»–)
  - è¿›åº¦æ¡æ˜¾ç¤º
  - åˆ†ç»„æ˜¾ç¤º

### æœ¬é¡¹ç›®å®ç° âœ…
**ä½ç½®**: `/src/ui/components/TodoList.tsx` (301 è¡Œ)

```typescript
export const TodoList: React.FC<TodoListProps> = ({
  todos,
  showCompleted = false,
  enableKeyboardNav = true,
  showProgressBar = true,
  groupByStatus = true,
  animationDelay = 50,
}) => {
  const [selectedIndex, setSelectedIndex] = useState(0);

  // ç»Ÿè®¡æ•°æ®
  const totalTodos = todos.length;
  const completedTodos = todos.filter(t => t.status === 'completed').length;
  const inProgressTodos = todos.filter(t => t.status === 'in_progress');
  const pendingTodos = todos.filter(t => t.status === 'pending');

  useInput((input, key) => {
    if (!enableKeyboardNav) return;
    if (key.upArrow) setSelectedIndex(prev => Math.max(0, prev - 1));
    if (key.downArrow) setSelectedIndex(prev => Math.min(todos.length - 1, prev + 1));
  });

  return (
    <Box flexDirection="column" borderStyle="single" borderColor="gray" paddingX={1} marginY={1}>
      <Text bold color="cyan">Tasks</Text>

      {/* è¿›åº¦æ¡ */}
      {showProgressBar && (
        <ProgressBar current={completedTodos} total={totalTodos} />
      )}

      {/* åˆ†ç»„æ˜¾ç¤º */}
      {groupByStatus && (
        <>
          {/* è¿›è¡Œä¸­ */}
          {inProgressTodos.length > 0 && (
            <TodoGroup title="âš¡ In Progress" todos={inProgressTodos} />
          )}

          {/* å¾…å¤„ç† */}
          {pendingTodos.length > 0 && (
            <TodoGroup title="ğŸ“‹ Pending" todos={pendingTodos} />
          )}

          {/* å·²å®Œæˆ */}
          {showCompleted && completedTodos.length > 0 && (
            <TodoGroup title="âœ“ Completed" todos={completedTodosInList} />
          )}
        </>
      )}

      <Text dimColor color="gray">Use â†‘â†“ to navigate</Text>
    </Box>
  );
};

// å•ä¸ªä»»åŠ¡é¡¹
const TodoItemComponent: React.FC = ({ todo, isSelected, animationDelay, index }) => {
  const [isVisible, setIsVisible] = useState(false);

  // æ¸å…¥åŠ¨ç”»
  useEffect(() => {
    const timer = setTimeout(() => setIsVisible(true), index * animationDelay);
    return () => clearTimeout(timer);
  }, [index, animationDelay]);

  if (!isVisible) return null;

  const statusIcon = {
    pending: 'â—‹',
    in_progress: 'â—',
    completed: 'â—',
  }[todo.status];

  const statusColor = {
    pending: 'gray',
    in_progress: 'yellow',
    completed: 'green',
  }[todo.status];

  // âš¡ ä½¿ç”¨ activeForm è¿˜æ˜¯ content
  const displayText = todo.status === 'in_progress' ? todo.activeForm : todo.content;

  return (
    <Box>
      {isSelected && <Text color="cyan" bold>â–¶ </Text>}
      {!isSelected && <Text>  </Text>}
      <Text color={statusColor}>{statusIcon}</Text>
      <Text> </Text>
      <Text color={statusColor} dimColor={todo.status === 'completed'}>
        {displayText}
      </Text>
    </Box>
  );
};
```

**çŠ¶æ€è½¬æ¢**:
```
â—‹ Pending: "Run tests"
   â†“ (å¼€å§‹æ‰§è¡Œ)
â— In Progress: "Running tests..."  (æ˜¾ç¤º activeForm)
   â†“ (å®Œæˆ)
â— Completed: "Run tests"  (ç°è‰²æ˜¾ç¤º content)
```

**å¯¹æ¯”ç»“æœ**:
- âœ… **ä¸‰ç§çŠ¶æ€**: â—‹ pending, â— in_progress, â— completed
- âœ… **åŠ¨æ€æè¿°**: activeForm vs content åˆ‡æ¢
- âœ… **è¿›åº¦æ¡**: æ˜¾ç¤ºå®Œæˆæ¯”ä¾‹
- âœ… **åˆ†ç»„**: æŒ‰çŠ¶æ€åˆ†ç±»æ˜¾ç¤º
- âœ… **åŠ¨ç”»**: æ¸å…¥æ•ˆæœ (50ms å»¶è¿Ÿ)
- âœ… **é”®ç›˜å¯¼èˆª**: â†‘â†“ é€‰æ‹©ä»»åŠ¡

---

## T223: é”™è¯¯æç¤ºç»„ä»¶ âœ…

### å®˜æ–¹å®ç°
- **ç»„ä»¶å**: ErrorDisplay / Message (role="error")
- **åŠŸèƒ½**:
  - çº¢è‰²è¾¹æ¡†
  - é”™è¯¯å›¾æ ‡
  - å †æ ˆè·Ÿè¸ªæ˜¾ç¤º

### æœ¬é¡¹ç›®å®ç° âœ…
**ä½ç½®**:
- `/src/ui/components/Message.tsx` (role="error")
- `/src/ui/components/ToolCall.tsx` (ErrorDisplay)

```typescript
// Message ç»„ä»¶ä¸­çš„é”™è¯¯æ¸²æŸ“
export const Message: React.FC<MessageProps> = ({ role, content, ... }) => {
  const isError = role === 'error';

  return (
    <Box flexDirection="column" marginY={1}>
      <Box>
        <Text bold color={isError ? 'red' : getRoleColor()}>
          {isError ? 'Error' : getRoleLabel()}
        </Text>
      </Box>
      <Box flexDirection="column" marginLeft={2}>
        <Text color={isError ? 'red' : undefined}>{content}</Text>
      </Box>
    </Box>
  );
};

// ToolCall ç»„ä»¶ä¸­çš„é”™è¯¯æ˜¾ç¤º
const ErrorDisplay: React.FC<{ error: string }> = ({ error }) => {
  const lines = error.split('\n');

  return (
    <Box flexDirection="column" marginLeft={2}>
      {lines.map((line, i) => (
        <Text key={i} color="red">{line}</Text>
      ))}
    </Box>
  );
};
```

**é”™è¯¯ç±»å‹**:
1. **å·¥å…·æ‰§è¡Œé”™è¯¯**: çº¢è‰² âœ— å›¾æ ‡ + é”™è¯¯æ¶ˆæ¯
2. **API é”™è¯¯**: "Error: Rate limit exceeded"
3. **éªŒè¯é”™è¯¯**: "Invalid file path"

**å¯¹æ¯”ç»“æœ**:
- âœ… **é¢œè‰²æ ‡è¯†**: çº¢è‰²æ–‡æœ¬ + å›¾æ ‡
- âœ… **å¤šè¡Œæ”¯æŒ**: å †æ ˆè·Ÿè¸ªé€è¡Œæ˜¾ç¤º
- âš ï¸  **æ ¼å¼åŒ–**: æœªå®ç°ç‰¹æ®Šçš„å †æ ˆè·Ÿè¸ªæ ¼å¼åŒ–

---

## T224: diff å±•ç¤ºç»„ä»¶ âœ…

### å®˜æ–¹å®ç°
- **ç»„ä»¶å**: DiffView
- **åŠŸèƒ½**:
  - Unified diff è§†å›¾
  - Side-by-side è§†å›¾
  - è¯­æ³•é«˜äº®å·®å¼‚

### æœ¬é¡¹ç›®å®ç° âœ…
**ä½ç½®**: `/src/ui/components/DiffView.tsx` (627 è¡Œ)

```typescript
export const DiffView: React.FC<DiffViewProps> = ({
  oldContent,
  newContent,
  fileName,
  mode = 'unified', // 'unified' | 'side-by-side'
  contextLines = 3,
  showLineNumbers = true,
  maxWidth = 120,
}) => {
  // Myers diff ç®—æ³•
  const { diffLines, hunks, stats } = useMemo(() => {
    const oldLines = oldContent.split('\n');
    const newLines = newContent.split('\n');
    const diffLines = computeDiff(oldLines, newLines);
    const hunks = createHunks(diffLines, contextLines);

    const stats = {
      additions: diffLines.filter(l => l.type === 'add' || l.type === 'modify').length,
      deletions: diffLines.filter(l => l.type === 'delete' || l.type === 'modify').length,
      changes: hunks.length,
    };

    return { diffLines, hunks, stats };
  }, [oldContent, newContent, contextLines]);

  return (
    <Box flexDirection="column">
      {/* æ–‡ä»¶å¤´ */}
      {fileName && (
        <Box>
          <Text bold>File: </Text>
          <Text color="cyan">{fileName}</Text>
        </Box>
      )}

      {/* ç»Ÿè®¡ä¿¡æ¯ */}
      <Box>
        <Text color="green">+{stats.additions}</Text>
        <Text> </Text>
        <Text color="red">-{stats.deletions}</Text>
        <Text> </Text>
        <Text color="gray">({stats.changes} changes)</Text>
      </Box>

      {/* Diff å†…å®¹ */}
      {mode === 'unified'
        ? <UnifiedView hunks={hunks} ... />
        : <SideBySideView hunks={hunks} ... />
      }
    </Box>
  );
};

// Unified è§†å›¾
const UnifiedView: React.FC = ({ hunks, showLineNumbers, maxWidth }) => {
  return (
    <Box flexDirection="column">
      {hunks.map(hunk => (
        <Box key={hunk.id} flexDirection="column">
          {/* Hunk å¤´ */}
          <Text color="cyan" bold>
            @@ -{hunk.oldStart},{hunk.oldLines} +{hunk.newStart},{hunk.newLines} @@
          </Text>

          {/* Hunk å†…å®¹ */}
          {hunk.lines.map(line => {
            if (line.type === 'context') {
              return (
                <Box>
                  {showLineNumbers && (
                    <>
                      <Text color="gray">{line.oldLineNumber}</Text>
                      <Text> </Text>
                      <Text color="gray">{line.newLineNumber}</Text>
                      <Text> </Text>
                    </>
                  )}
                  <Text>  {line.content}</Text>
                </Box>
              );
            } else if (line.type === 'add') {
              return (
                <Box>
                  {showLineNumbers && (
                    <>
                      <Text color="gray">    </Text>
                      <Text color="green">{line.newLineNumber}</Text>
                    </>
                  )}
                  <Text color="green">+ {line.newContent}</Text>
                </Box>
              );
            } else if (line.type === 'delete') {
              return (
                <Box>
                  {showLineNumbers && (
                    <>
                      <Text color="red">{line.oldLineNumber}</Text>
                      <Text color="gray">    </Text>
                    </>
                  )}
                  <Text color="red">- {line.oldContent}</Text>
                </Box>
              );
            }
          })}
        </Box>
      ))}
    </Box>
  );
};

// Side-by-Side è§†å›¾
const SideBySideView: React.FC = ({ hunks, ... }) => {
  const halfWidth = Math.floor((maxWidth - 8) / 2);

  return (
    <Box flexDirection="column">
      {/* å¤´éƒ¨ */}
      <Box>
        <Box width={halfWidth}>
          <Text color="red" bold>Original</Text>
        </Box>
        <Text> â”‚ </Text>
        <Box width={halfWidth}>
          <Text color="green" bold>Modified</Text>
        </Box>
      </Box>

      {/* å†…å®¹ */}
      {hunks.map(hunk => (
        hunk.lines.map(line => (
          <Box>
            {/* å·¦ä¾§ï¼šæ—§å†…å®¹ */}
            <Box width={halfWidth}>
              {line.type === 'delete' || line.type === 'modify' ? (
                <Text color="red" backgroundColor="rgb(70,20,20)">
                  {line.oldContent}
                </Text>
              ) : (
                <Text>{line.content}</Text>
              )}
            </Box>

            <Text> â”‚ </Text>

            {/* å³ä¾§ï¼šæ–°å†…å®¹ */}
            <Box width={halfWidth}>
              {line.type === 'add' || line.type === 'modify' ? (
                <Text color="green" backgroundColor="rgb(20,70,20)">
                  {line.newContent}
                </Text>
              ) : (
                <Text>{line.content}</Text>
              )}
            </Box>
          </Box>
        ))
      ))}
    </Box>
  );
};

// Myers Diff ç®—æ³•å®ç°
function computeDiff(oldLines: string[], newLines: string[]): DiffLine[] {
  const lcs = computeLCS(oldLines, newLines); // æœ€é•¿å…¬å…±å­åºåˆ—
  const result: DiffLine[] = [];

  let oldIndex = 0;
  let newIndex = 0;
  let lcsIndex = 0;

  while (oldIndex < oldLines.length || newIndex < newLines.length) {
    if (lcsIndex < lcs.length && oldLines[oldIndex] === lcs[lcsIndex]) {
      // ç›¸åŒè¡Œï¼ˆä¸Šä¸‹æ–‡ï¼‰
      result.push({
        type: 'context',
        oldLineNumber: oldIndex + 1,
        newLineNumber: newIndex + 1,
        content: oldLines[oldIndex],
      });
      oldIndex++; newIndex++; lcsIndex++;
    } else if (oldIndex < oldLines.length && newIndex < newLines.length) {
      // ä¿®æ”¹è¡Œ
      result.push({
        type: 'modify',
        oldLineNumber: oldIndex + 1,
        newLineNumber: newIndex + 1,
        oldContent: oldLines[oldIndex],
        newContent: newLines[newIndex],
      });
      oldIndex++; newIndex++;
    } else if (oldIndex < oldLines.length) {
      // åˆ é™¤è¡Œ
      result.push({ type: 'delete', oldLineNumber: oldIndex + 1, oldContent: oldLines[oldIndex] });
      oldIndex++;
    } else {
      // æ–°å¢è¡Œ
      result.push({ type: 'add', newLineNumber: newIndex + 1, newContent: newLines[newIndex] });
      newIndex++;
    }
  }

  return result;
}
```

**å¯¹æ¯”ç»“æœ**:
- âœ… **ä¸¤ç§è§†å›¾**: Unified (ä¸Šä¸‹) å’Œ Side-by-Side (å·¦å³)
- âœ… **Myers ç®—æ³•**: å®Œæ•´å®ç°å·®å¼‚è®¡ç®— (LCS + å›æº¯)
- âœ… **è¡Œå·æ˜¾ç¤º**: åŒè¡Œå· (old + new)
- âœ… **ä¸Šä¸‹æ–‡**: å¯é…ç½®ä¸Šä¸‹æ–‡è¡Œæ•° (é»˜è®¤ 3)
- âœ… **èƒŒæ™¯è‰²**: ä½¿ç”¨ RGB é¢œè‰²åŒºåˆ†æ–°å¢/åˆ é™¤
- âœ… **ç»Ÿè®¡ä¿¡æ¯**: +X -Y (Z changes)
- âš ï¸  **æ€§èƒ½**: å¤§æ–‡ä»¶ diff å¯èƒ½è¾ƒæ…¢ï¼ˆO(n*m) å¤æ‚åº¦ï¼‰

---

## T225: æ–‡ä»¶æ ‘ç»„ä»¶ âŒ

### å®˜æ–¹å®ç°
- **å¯èƒ½å­˜åœ¨**: ç”¨äºæ˜¾ç¤ºæ–‡ä»¶ç›®å½•ç»“æ„
- **åŠŸèƒ½**: æ ‘å½¢å±•å¼€/æŠ˜å ã€æ–‡ä»¶å›¾æ ‡

### æœ¬é¡¹ç›®å®ç° âŒ
**ç°çŠ¶**: æœªå®ç°ç‹¬ç«‹çš„æ–‡ä»¶æ ‘ç»„ä»¶

**æ›¿ä»£æ–¹æ¡ˆ**:
- ä½¿ç”¨ Bash å·¥å…·çš„ `tree` å‘½ä»¤è¾“å‡º
- æˆ–ä½¿ç”¨ `ls -la` åˆ—è¡¨æ˜¾ç¤º

**å¾…å®ç°**:
```typescript
// /src/ui/components/FileTree.tsx (è§„åˆ’)
export const FileTree: React.FC<FileTreeProps> = ({ root, expanded, ... }) => {
  return (
    <Box flexDirection="column">
      <TreeNode name="src" type="folder" expanded={true}>
        <TreeNode name="ui" type="folder" expanded={true}>
          <TreeNode name="App.tsx" type="file" />
          <TreeNode name="components" type="folder" expanded={false} />
        </TreeNode>
      </TreeNode>
    </Box>
  );
};
```

**å¯¹æ¯”ç»“æœ**:
- âŒ **æœªå®ç°**: æ— ç‹¬ç«‹çš„æ–‡ä»¶æ ‘ç»„ä»¶
- ğŸ”§ **è§„åˆ’ä¸­**: å¯ä½œä¸ºæœªæ¥å¢å¼ºåŠŸèƒ½

---

## T226: çŠ¶æ€æ ç»„ä»¶ âœ…

### å®˜æ–¹å®ç°
- **ç»„ä»¶å**: StatusBar
- **ä½ç½®**: åº•éƒ¨
- **ä¿¡æ¯**: æ¨¡å‹ã€Tokenã€è´¹ç”¨ã€æ—¶é•¿ã€ç½‘ç»œçŠ¶æ€

### æœ¬é¡¹ç›®å®ç° âœ…
**ä½ç½®**: `/src/ui/components/StatusBar.tsx` (244 è¡Œ)

```typescript
export const StatusBar: React.FC<StatusBarProps> = ({
  messageCount,
  tokenCount,
  inputTokens,
  outputTokens,
  cost,
  duration,
  isProcessing,
  model,
  contextUsed,
  contextMax,
  contextPercentage,
  networkStatus = 'online',
  permissionMode,
  gitBranch,
  cwd,
}) => {
  // æ ¼å¼åŒ–æ—¶é•¿
  const formatDuration = (ms: number) => {
    if (ms < 1000) return `${ms}ms`;
    if (ms < 60000) return `${(ms / 1000).toFixed(1)}s`;
    const minutes = Math.floor(ms / 60000);
    const seconds = Math.floor((ms % 60000) / 1000);
    if (minutes < 60) return `${minutes}m ${seconds}s`;
    const hours = Math.floor(minutes / 60);
    const mins = minutes % 60;
    return `${hours}h ${mins}m`;
  };

  // æ ¼å¼åŒ– Token (1K, 1M)
  const formatTokens = (num: number) => {
    if (num >= 1000000) return `${(num / 1000000).toFixed(1)}M`;
    if (num >= 1000) return `${(num / 1000).toFixed(1)}K`;
    return num.toString();
  };

  // ç½‘ç»œçŠ¶æ€æŒ‡ç¤ºå™¨
  const getNetworkIndicator = () => {
    switch (networkStatus) {
      case 'online': return { icon: 'â—', color: 'green' };
      case 'offline': return { icon: 'â—', color: 'gray' };
      case 'error': return { icon: 'â—', color: 'red' };
    }
  };

  // ä¸Šä¸‹æ–‡ä½¿ç”¨é¢œè‰²
  const getContextColor = (percentage: number) => {
    if (percentage >= 90) return 'red';
    if (percentage >= 70) return 'yellow';
    return 'green';
  };

  return (
    <Box flexDirection="column">
      {/* ç¬¬ä¸€è¡Œï¼šä¸»è¦ä¿¡æ¯ */}
      <Box borderStyle="single" borderColor="gray" paddingX={1} justifyContent="space-between">
        <Box gap={2}>
          {/* æ¨¡å‹ */}
          <Text color="cyan" bold>{modelDisplayName}</Text>

          {/* æ¶ˆæ¯æ•° */}
          <Text color="gray">
            <Text color="white">{messageCount}</Text> msgs
          </Text>

          {/* Token è¯¦æƒ… */}
          <Text color="gray">
            <Text color="white">{formatTokens(inputTokens)}</Text>
            <Text color="gray">/</Text>
            <Text color="white">{formatTokens(outputTokens)}</Text>
            <Text color="gray"> tokens</Text>
          </Text>

          {/* è´¹ç”¨ */}
          {cost && <Text color="green">{cost}</Text>}

          {/* ä¸Šä¸‹æ–‡ä½¿ç”¨ */}
          <Text color="gray">
            ctx: <Text color={getContextColor(contextPercentage)}>
              {contextPercentage.toFixed(0)}%
            </Text>
          </Text>
        </Box>

        <Box gap={2}>
          {/* å¤„ç†çŠ¶æ€ */}
          {isProcessing && <Text color="yellow">âš™ Processing...</Text>}

          {/* ä¼šè¯æ—¶é•¿ */}
          <Text color="white">{formatDuration(duration)}</Text>

          {/* ç½‘ç»œçŠ¶æ€ */}
          <Text color={networkIndicator.color}>{networkIndicator.icon}</Text>

          {/* æƒé™æ¨¡å¼ */}
          {permissionMode && <Text color="magenta">[{permissionMode}]</Text>}
        </Box>
      </Box>

      {/* ç¬¬äºŒè¡Œï¼šç¯å¢ƒä¿¡æ¯ */}
      {(gitBranch || cwd) && (
        <Box paddingX={1} gap={2}>
          {/* Git åˆ†æ”¯ */}
          {gitBranch && (
            <Text color="gray">
              <Text color="blue">â‡</Text> {gitBranch}
            </Text>
          )}

          {/* å·¥ä½œç›®å½• */}
          {cwd && (
            <Text color="gray">
              <Text color="cyan">ğŸ“</Text> {formatCwd(cwd)}
            </Text>
          )}
        </Box>
      )}
    </Box>
  );
};
```

**æ˜¾ç¤ºä¿¡æ¯**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sonnet-4.5  3 msgs  12.5K/8.3K tokens  $0.15  ctx: 45% â”‚ 2m 30s  â— [plan] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â‡ main  ğŸ“ ~/projects/claude-code
```

**å¯¹æ¯”ç»“æœ**:
- âœ… **å®Œæ•´ä¿¡æ¯**: æ¨¡å‹ã€æ¶ˆæ¯æ•°ã€Tokenã€è´¹ç”¨ã€æ—¶é•¿ã€ä¸Šä¸‹æ–‡ã€ç½‘ç»œã€æƒé™ã€Gitã€ç›®å½•
- âœ… **æ™ºèƒ½æ ¼å¼åŒ–**: Token (K/M)ã€æ—¶é•¿ (s/m/h)ã€è·¯å¾„ç¼©çŸ­
- âœ… **é¢œè‰²ç¼–ç **: ä¸Šä¸‹æ–‡ä½¿ç”¨ç‡ (ç»¿/é»„/çº¢)
- âœ… **åŒè¡Œå¸ƒå±€**: ä¸»è¦ä¿¡æ¯ + ç¯å¢ƒä¿¡æ¯
- âœ… **çŠ¶æ€æŒ‡ç¤º**: â— ç»¿è‰²(åœ¨çº¿) / ç°è‰²(ç¦»çº¿) / çº¢è‰²(é”™è¯¯)

---

## T227: ä¸»é¢˜ç³»ç»Ÿ âš ï¸

### å®˜æ–¹å®ç°
- **å¯èƒ½æ”¯æŒ**: `/theme` å‘½ä»¤åˆ‡æ¢ä¸»é¢˜
- **ä¸»é¢˜**: light / dark / custom
- **é¢œè‰²**: è‡ªå®šä¹‰é…è‰²æ–¹æ¡ˆ

### æœ¬é¡¹ç›®å®ç° âš ï¸
**ç°çŠ¶**: æœªå®ç°å®Œæ•´çš„ä¸»é¢˜ç³»ç»Ÿ

**éƒ¨åˆ†å®ç°**:
```typescript
// /src/ui/components/Header.tsx
const CLAUDE_COLOR = '#D77757'; // å®˜æ–¹æ©™è‰²

// /src/ui/components/Input.tsx
const claudeColor = '#D77757';

// /src/ui/components/WelcomeScreen.tsx
const clawdBody = '#D77757'; // rgb(215,119,87)
const clawdBackground = '#000000';
```

**è§„åˆ’å®ç°**:
```typescript
// /src/ui/theme.ts (å¾…å®ç°)
export interface Theme {
  name: string;
  colors: {
    primary: string;
    secondary: string;
    success: string;
    warning: string;
    error: string;
    text: string;
    background: string;
    border: string;
  };
  styles: {
    borderStyle: 'single' | 'double' | 'round';
    spinnerType: keyof typeof SPINNER_TYPES;
    progressBarStyle: 'blocks' | 'dots' | 'arrows' | 'smooth';
  };
}

export const themes: Record<string, Theme> = {
  default: {
    name: 'Claude Default',
    colors: {
      primary: '#D77757',
      success: '#00FF00',
      error: '#FF0000',
      // ...
    },
    styles: {
      borderStyle: 'round',
      spinnerType: 'dots',
      progressBarStyle: 'blocks',
    },
  },
  dark: { ... },
  light: { ... },
};

// ä¸»é¢˜ä¸Šä¸‹æ–‡
export const ThemeContext = React.createContext<Theme>(themes.default);

export const useTheme = () => useContext(ThemeContext);
```

**å¯¹æ¯”ç»“æœ**:
- âš ï¸  **éƒ¨åˆ†å®ç°**: ä½¿ç”¨å®˜æ–¹é¢œè‰² #D77757ï¼Œä½†æœªç³»ç»ŸåŒ–
- âŒ **ä¸»é¢˜åˆ‡æ¢**: æœªå®ç° `/theme` å‘½ä»¤
- âŒ **é…ç½®æŒä¹…åŒ–**: æœªä¿å­˜åˆ° settings.json
- ğŸ”§ **å¾…å®Œå–„**: éœ€è¦å®Œæ•´çš„ä¸»é¢˜ç³»ç»Ÿæ¶æ„

---

## å…¶ä»– UI ç»„ä»¶

### WelcomeScreen ç»„ä»¶ âœ…
**ä½ç½®**: `/src/ui/components/WelcomeScreen.tsx` (260 è¡Œ)

```typescript
export const WelcomeScreen: React.FC = ({ version, username, model, ... }) => {
  return (
    <Box borderStyle="round" borderColor="#D77757">
      {/* å·¦ä¾§ï¼šæ¬¢è¿ä¿¡æ¯ + clawd æœºå™¨äºº */}
      <Box flexDirection="column" alignItems="center">
        <Text bold>Welcome back {username}!</Text>

        {/* ASCII è‰ºæœ¯æœºå™¨äºº */}
        <ClawdMascot animate={true} />

        <Text color="cyan">{model}</Text>
      </Box>

      {/* å‚ç›´åˆ†éš”çº¿ */}
      <VerticalDivider height={9} />

      {/* å³ä¾§ï¼šRecent activity + What's new */}
      <Box flexDirection="column">
        <Text color="#D77757" bold>Recent activity</Text>
        {recentActivity.map(item => (
          <Text dimColor>{formatTimeAgo(item.timestamp)}  {item.description}</Text>
        ))}
        <Text dimColor italic>/resume for more</Text>

        <Text color="#D77757" bold>What's new</Text>
        {whatsNew.map(item => (
          <Text dimColor>{item}</Text>
        ))}
        <Text dimColor italic>/release-notes for more</Text>
      </Box>
    </Box>
  );
};

// clawd æœºå™¨äººï¼ˆå®˜æ–¹å‰ç¥¥ç‰©ï¼‰
const ClawdMascot: React.FC = ({ animate }) => {
  const [sparkleFrame, setSparkleFrame] = useState(0);

  // é—ªçƒåŠ¨ç”» (400ms é—´éš”)
  useEffect(() => {
    if (!animate) return;
    const timer = setInterval(() => {
      setSparkleFrame(f => (f + 1) % 4);
    }, 400);
    return () => clearInterval(timer);
  }, [animate]);

  const sp = sparklePatterns[sparkleFrame];

  return (
    <Box flexDirection="column" alignItems="center">
      {/* æ˜Ÿæ˜ŸåŠ¨ç”» */}
      <Text><Text color="#D77757">{sp.s1}</Text>    <Text color="#D77757">{sp.s2}</Text></Text>

      {/* èº«ä½“ */}
      <Text>
        <Text color="#D77757">{sp.s3}</Text>
        <Text color="#D77757"> â–</Text>
        <Text color="#D77757" backgroundColor="#000000">â–›â–ˆâ–ˆâ–ˆâ–œ</Text>
        <Text color="#D77757">â–Œ </Text>
        <Text color="#D77757">{sp.s4}</Text>
      </Text>
      <Text>
        <Text color="#D77757">  â–â–œ</Text>
        <Text color="#D77757" backgroundColor="#000000">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</Text>
        <Text color="#D77757">â–›â–˜</Text>
      </Text>

      {/* è„š */}
      <Text color="#D77757">    â–˜â–˜ â–â–</Text>
    </Box>
  );
};
```

**å¯¹æ¯”ç»“æœ**:
- âœ… **å®˜æ–¹è®¾è®¡**: å®Œæ•´å¤åˆ» clawd æœºå™¨äºº ASCII è‰ºæœ¯
- âœ… **åŠ¨ç”»æ•ˆæœ**: å››å¸§æ˜Ÿæ˜Ÿé—ªçƒåŠ¨ç”»
- âœ… **å¸ƒå±€**: å·¦å³åˆ†æ  + å‚ç›´åˆ†éš”çº¿
- âœ… **ä¿¡æ¯ä¸°å¯Œ**: Recent activity + What's new

### ShortcutHelp ç»„ä»¶ âœ…
**ä½ç½®**: `/src/ui/components/ShortcutHelp.tsx` (96 è¡Œ)

```typescript
const SHORTCUTS = [
  { key: '?', description: 'Show/hide this help', category: 'General' },
  { key: 'Ctrl+C', description: 'Cancel / Exit', category: 'General' },
  { key: 'Enter', description: 'Submit message', category: 'Input' },
  { key: 'â†‘/â†“', description: 'Navigate history', category: 'Input' },
  { key: 'Tab', description: 'Autocomplete command', category: 'Input' },
  { key: '/help', description: 'Show all commands', category: 'Commands' },
  { key: '/clear', description: 'Clear conversation', category: 'Commands' },
  // ...
];

export const ShortcutHelp: React.FC = ({ isVisible, onClose }) => {
  if (!isVisible) return null;

  const categories = [...new Set(SHORTCUTS.map(s => s.category))];

  return (
    <Box borderStyle="round" borderColor="cyan" paddingX={2} paddingY={1}>
      <Text color="cyan" bold>âŒ¨ï¸  Keyboard Shortcuts</Text>
      <Text color="gray" dimColor>Press ? or Esc to close</Text>

      {categories.map(category => (
        <Box key={category} flexDirection="column">
          <Text color="yellow" bold>{category}</Text>
          {SHORTCUTS.filter(s => s.category === category).map(shortcut => (
            <Box marginLeft={2}>
              <Box width={15}>
                <Text color="green" bold>{shortcut.key}</Text>
              </Box>
              <Text color="gray">{shortcut.description}</Text>
            </Box>
          ))}
        </Box>
      ))}
    </Box>
  );
};
```

**å¯¹æ¯”ç»“æœ**:
- âœ… **åˆ†ç±»æ˜¾ç¤º**: General / Input / Commands
- âœ… **å¿«é€Ÿè®¿é—®**: ? é”®æ˜¾ç¤º/éšè—
- âœ… **æ¸…æ™°å¸ƒå±€**: é”®ä½ + æè¿°å¯¹é½

---

## æ€»ä½“å¯¹æ¯”æ€»ç»“

### åŠŸèƒ½å®Œæˆåº¦ç»Ÿè®¡

| åŠŸèƒ½ç‚¹ | ä»»åŠ¡ç¼–å· | å®˜æ–¹å®ç° | æœ¬é¡¹ç›®å®ç° | å®Œæˆåº¦ | å¤‡æ³¨ |
|--------|---------|---------|-----------|--------|------|
| React + Ink æ¡†æ¶ | T213 | âœ… | âœ… | 100% | å®Œå…¨ä¸€è‡´ |
| è¾“å…¥æ¡†ç»„ä»¶ | T214 | âœ… | âœ… | 110% | è¶…è¶Šå®˜æ–¹ï¼ˆVim æ¨¡å¼ï¼‰ |
| æ¶ˆæ¯å±•ç¤ºç»„ä»¶ | T215 | âœ… | âœ… | 95% | æµå¼æ¸²æŸ“ + Markdown |
| å·¥å…·è°ƒç”¨å±•ç¤º | T216 | âœ… | âœ… | 100% | Diff è§†å›¾å®Œæ•´ |
| Markdown æ¸²æŸ“ | T217 | âœ… | âœ… | 80% | åŸºç¡€è¯­æ³•æ”¯æŒ |
| ä»£ç é«˜äº® | T218 | âœ… | âŒ | 30% | ä»…é¢œè‰²åŒºåˆ† |
| Spinner ç»„ä»¶ | T219 | âœ… | âœ… | 120% | 11 ç§æ ·å¼ |
| è¿›åº¦æ¡ç»„ä»¶ | T220 | âœ… | âœ… | 110% | 4 ç§æ ·å¼ + ETA |
| æƒé™ç¡®è®¤å¯¹è¯æ¡† | T221 | âœ… | âœ… | 100% | å±é™©æ£€æµ‹å®Œæ•´ |
| Todo åˆ—è¡¨å±•ç¤º | T222 | âœ… | âœ… | 100% | çŠ¶æ€ + åŠ¨ç”» |
| é”™è¯¯æç¤ºç»„ä»¶ | T223 | âœ… | âœ… | 90% | åŸºç¡€æ˜¾ç¤º |
| diff å±•ç¤ºç»„ä»¶ | T224 | âœ… | âœ… | 100% | Myers ç®—æ³• |
| æ–‡ä»¶æ ‘ç»„ä»¶ | T225 | âš ï¸  | âŒ | 0% | æœªå®ç° |
| çŠ¶æ€æ ç»„ä»¶ | T226 | âœ… | âœ… | 100% | ä¿¡æ¯å®Œæ•´ |
| ä¸»é¢˜ç³»ç»Ÿ | T227 | âš ï¸  | âš ï¸  | 40% | éƒ¨åˆ†é¢œè‰² |
| **æ€»ä½“** | **T213-T227** | **15 ä¸ª** | **12 ä¸ªå®Œæ•´** | **87%** | é«˜åº¦è¿˜åŸ |

### ä»£ç é‡ç»Ÿè®¡

```bash
# æœ¬é¡¹ç›® UI ä»£ç ç»Ÿè®¡
find /home/user/claude-code-open/src/ui -name "*.tsx" -o -name "*.ts" | xargs wc -l
# æ€»è®¡: 22 ä¸ªæ–‡ä»¶, çº¦ 3500+ è¡Œä»£ç 

# ä¸»è¦ç»„ä»¶è¡Œæ•°:
- App.tsx: 439 è¡Œ
- Input.tsx: 556 è¡Œ
- Message.tsx: 389 è¡Œ
- ToolCall.tsx: 435 è¡Œ
- DiffView.tsx: 627 è¡Œ
- ProgressBar.tsx: 297 è¡Œ
- PermissionPrompt.tsx: 326 è¡Œ
- TodoList.tsx: 301 è¡Œ
- WelcomeScreen.tsx: 260 è¡Œ
- StatusBar.tsx: 244 è¡Œ
- Spinner.tsx: 206 è¡Œ
- Header.tsx: 206 è¡Œ
- ShortcutHelp.tsx: 96 è¡Œ
```

### ä¼˜åŠ¿ä¸ä¸è¶³

#### âœ… ä¼˜åŠ¿
1. **å®Œæ•´å®ç°**: 87% åŠŸèƒ½ç‚¹å®Œæ•´å®ç°ï¼ˆ13/15ï¼‰
2. **åŠŸèƒ½è¶…è¶Š**:
   - Input ç»„ä»¶çš„å®Œæ•´ Vim æ¨¡å¼
   - Spinner çš„ 11 ç§åŠ¨ç”»æ ·å¼
   - ProgressBar çš„ ETA è®¡ç®—
   - DiffView çš„ Myers ç®—æ³•
3. **ä»£ç è´¨é‡**:
   - TypeScript ç±»å‹å®‰å…¨
   - React Hooks æœ€ä½³å®è·µ
   - è¯¦ç»†æ³¨é‡Šå’Œæ–‡æ¡£
4. **è§†è§‰è¿˜åŸ**:
   - å®˜æ–¹é…è‰² #D77757
   - clawd æœºå™¨äºº ASCII è‰ºæœ¯
   - è¾¹æ¡†å’Œå›¾æ ‡ä¸€è‡´

#### âš ï¸  ä¸è¶³
1. **ä»£ç é«˜äº®**: æœªå®ç°è¯­æ³•é«˜äº®ï¼ˆä»…å•è‰²æ˜¾ç¤ºï¼‰
2. **æ–‡ä»¶æ ‘**: æœªå®ç°ç‹¬ç«‹æ–‡ä»¶æ ‘ç»„ä»¶
3. **ä¸»é¢˜ç³»ç»Ÿ**: æœªå®ç°å®Œæ•´çš„ä¸»é¢˜åˆ‡æ¢æœºåˆ¶
4. **æ€§èƒ½ä¼˜åŒ–**: å¤§æ–‡ä»¶ diff å¯èƒ½è¾ƒæ…¢
5. **æµ‹è¯•è¦†ç›–**: ç¼ºå°‘å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

#### ğŸ”§ æ”¹è¿›æ–¹å‘
1. **é›†æˆä»£ç é«˜äº®**:
   - ä½¿ç”¨ `shiki` æˆ– `prism` åº“
   - æ”¯æŒ 100+ ç§è¯­è¨€
   - å¤šç§ä¸»é¢˜ï¼ˆnord, monokai...ï¼‰

2. **å®ç°æ–‡ä»¶æ ‘**:
   - æ ‘å½¢å±•å¼€/æŠ˜å 
   - æ–‡ä»¶å›¾æ ‡
   - æœç´¢è¿‡æ»¤

3. **å®Œå–„ä¸»é¢˜ç³»ç»Ÿ**:
   - ä¸»é¢˜é…ç½®æ–‡ä»¶
   - `/theme` å‘½ä»¤åˆ‡æ¢
   - è‡ªå®šä¹‰é…è‰²æ–¹æ¡ˆ

4. **æ€§èƒ½ä¼˜åŒ–**:
   - è™šæ‹Ÿæ»šåŠ¨ï¼ˆé•¿åˆ—è¡¨ï¼‰
   - Diff ç®—æ³•ä¼˜åŒ–ï¼ˆå¢é‡è®¡ç®—ï¼‰
   - æ‡’åŠ è½½ç»„ä»¶

5. **å¢åŠ æµ‹è¯•**:
   - React Testing Library
   - Ink Testing Library
   - E2E æµ‹è¯•ï¼ˆPlaywrightï¼‰

---

## å‚è€ƒæ–‡æ¡£

### å®˜æ–¹èµ„æº
- Ink å®˜æ–¹æ–‡æ¡£: https://github.com/vadimdemedes/ink
- React å®˜æ–¹æ–‡æ¡£: https://react.dev
- ANSI é¢œè‰²æ ‡å‡†: https://en.wikipedia.org/wiki/ANSI_escape_code

### æœ¬é¡¹ç›®å®ç°
- UI æºç ç›®å½•: `/src/ui/`
- ç»„ä»¶æ–‡æ¡£: `/src/ui/components/*.README.md`
- ç¤ºä¾‹ä»£ç : `/src/ui/components/*.example.tsx`

### ç›¸å…³ä»»åŠ¡
- T001-T012: CLI å…¥å£å’Œå‚æ•°è§£æ
- T013-T024: API å®¢æˆ·ç«¯ (Anthropic SDK)
- T086-T100: å·¥å…·åŸºç¡€è®¾æ–½
- T213-T227: UI ç»„ä»¶ (æœ¬æ–‡æ¡£)

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**ç”Ÿæˆæ—¶é—´**: 2025-12-25
**å¯¹æ¯”åŸºå‡†**: @anthropic-ai/claude-code v2.0.76
**åˆ†æè¦†ç›–**: 15 ä¸ªåŠŸèƒ½ç‚¹ï¼Œ3500+ è¡Œä»£ç ï¼Œ22 ä¸ªæ–‡ä»¶

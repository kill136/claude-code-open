# E2E æµ‹è¯•æ¡†æ¶æ–‡ä»¶ç´¢å¼•

## æ–‡ä»¶ç»“æ„

```
tests/e2e/
â”‚
â”œâ”€â”€ ğŸ“‹ æ ¸å¿ƒæ¡†æ¶ (Framework Core)
â”‚   â”œâ”€â”€ setup.ts              - æµ‹è¯•ç¯å¢ƒè®¾ç½® (250è¡Œ)
â”‚   â”œâ”€â”€ cli-runner.ts         - CLI æ‰§è¡Œå™¨ (350è¡Œ)
â”‚   â””â”€â”€ mock-server.ts        - Mock API æœåŠ¡å™¨ (380è¡Œ)
â”‚
â”œâ”€â”€ ğŸ§ª æµ‹è¯•å¥—ä»¶ (Test Suites)
â”‚   â”œâ”€â”€ cli-basic.test.ts     - åŸºç¡€åŠŸèƒ½æµ‹è¯• (12ä¸ªæµ‹è¯•, 270è¡Œ)
â”‚   â”œâ”€â”€ cli-session.test.ts   - ä¼šè¯æµ‹è¯• (8ä¸ªæµ‹è¯•, 320è¡Œ)
â”‚   â””â”€â”€ cli-tools.test.ts     - å·¥å…·æµ‹è¯• (11ä¸ªæµ‹è¯•, 380è¡Œ)
â”‚
â”œâ”€â”€ ğŸ”§ è¾…åŠ©å·¥å…· (Utilities)
â”‚   â”œâ”€â”€ run-all.ts           - æµ‹è¯•è¿è¡Œå™¨ (100è¡Œ)
â”‚   â””â”€â”€ example.test.ts      - æµ‹è¯•ç¤ºä¾‹ (5ä¸ªç¤ºä¾‹, 240è¡Œ)
â”‚
â””â”€â”€ ğŸ“– æ–‡æ¡£ (Documentation)
    â”œâ”€â”€ README.md            - å®Œæ•´æ–‡æ¡£ (650è¡Œ)
    â”œâ”€â”€ QUICK_START.md       - å¿«é€Ÿå¼€å§‹ (150è¡Œ)
    â”œâ”€â”€ IMPLEMENTATION.md    - å®ç°æŠ¥å‘Š (400è¡Œ)
    â””â”€â”€ INDEX.md            - æœ¬æ–‡ä»¶ (æ–‡ä»¶ç´¢å¼•)
```

## å¿«é€Ÿå¯¼èˆª

### ğŸš€ æˆ‘æƒ³å¼€å§‹ä½¿ç”¨
- [å¿«é€Ÿå¼€å§‹](./QUICK_START.md) - 5åˆ†é’Ÿå…¥é—¨
- [æµ‹è¯•ç¤ºä¾‹](./example.test.ts) - å®é™…ä»£ç ç¤ºä¾‹

### ğŸ“š æˆ‘æƒ³æ·±å…¥äº†è§£
- [å®Œæ•´æ–‡æ¡£](./README.md) - è¯¦ç»†ä½¿ç”¨æŒ‡å—
- [å®ç°æŠ¥å‘Š](./IMPLEMENTATION.md) - æŠ€æœ¯ç»†èŠ‚

### ğŸ”¨ æˆ‘æƒ³ç¼–å†™æµ‹è¯•
- [setup.ts](./setup.ts) - æµ‹è¯•å·¥å…· API
- [cli-runner.ts](./cli-runner.ts) - CLI è¿è¡Œå™¨ API
- [mock-server.ts](./mock-server.ts) - Mock æœåŠ¡å™¨ API

### ğŸ¯ æˆ‘æƒ³å‚è€ƒç°æœ‰æµ‹è¯•
- [åŸºç¡€æµ‹è¯•](./cli-basic.test.ts) - CLI å‚æ•°å’Œé€‰é¡¹
- [ä¼šè¯æµ‹è¯•](./cli-session.test.ts) - ä¼šè¯ç®¡ç†
- [å·¥å…·æµ‹è¯•](./cli-tools.test.ts) - å·¥å…·è°ƒç”¨

## æ–‡ä»¶è¯¦æƒ…

### æ ¸å¿ƒæ¡†æ¶

#### setup.ts
**ç”¨é€”**: æä¾›æµ‹è¯•ç¯å¢ƒåˆå§‹åŒ–ã€æ¸…ç†å’Œæ–­è¨€å·¥å…·

**ä¸»è¦å¯¼å‡º**:
```typescript
// ç¯å¢ƒç®¡ç†
setupE2ETest(testName: string): Promise<E2ETestContext>
teardownE2ETest(context: E2ETestContext): Promise<void>

// æ–‡ä»¶æ“ä½œ
createTestFile(), readTestFile(), fileExists(), listFiles()

// æ–­è¨€
assert(), assertEqual(), assertContains(), assertMatch()

// å·¥å…·
sleep(), waitFor(), runTestSuite()
```

**é€‚ç”¨åœºæ™¯**:
- éœ€è¦éš”ç¦»çš„æµ‹è¯•ç¯å¢ƒ
- éœ€è¦åˆ›å»ºä¸´æ—¶æ–‡ä»¶
- éœ€è¦æ–­è¨€æµ‹è¯•ç»“æœ

#### cli-runner.ts
**ç”¨é€”**: ç¼–ç¨‹æ–¹å¼è¿è¡Œ CLI å¹¶æ•è·è¾“å‡º

**ä¸»è¦å¯¼å‡º**:
```typescript
// åŸºç¡€è¿è¡Œ
runCLI(args, options): Promise<CLIRunResult>
runSimpleCommand(command, options): Promise<string>

// äº¤äº’å¼
class InteractiveCLISession { ... }

// æ¨¡æ‹Ÿ
simulateInteraction(inputs, options): Promise<CLIRunResult>
```

**é€‚ç”¨åœºæ™¯**:
- æµ‹è¯• CLI å‘½ä»¤è¾“å‡º
- éœ€è¦æ•è· stdout/stderr
- éœ€è¦äº¤äº’å¼æµ‹è¯•

#### mock-server.ts
**ç”¨é€”**: æ¨¡æ‹Ÿ Anthropic API æœåŠ¡å™¨

**ä¸»è¦å¯¼å‡º**:
```typescript
class MockApiServer {
  start(), stop()
  setTextResponse(), setToolUseResponse()
  setResponseHandler()
  getRequests(), getLastRequest()
}
```

**é€‚ç”¨åœºæ™¯**:
- æµ‹è¯• API é›†æˆ
- ä¸éœ€è¦çœŸå® API å¯†é’¥
- éœ€è¦å¯é¢„æµ‹çš„å“åº”
- éœ€è¦éªŒè¯è¯·æ±‚å†…å®¹

### æµ‹è¯•å¥—ä»¶

#### cli-basic.test.ts (12 ä¸ªæµ‹è¯•)
æµ‹è¯•åŸºç¡€ CLI åŠŸèƒ½ï¼š
1. âœ… ç‰ˆæœ¬ä¿¡æ¯ (--version, -v)
2. âœ… å¸®åŠ©ä¿¡æ¯ (--help, -h)
3. âœ… æ‰“å°æ¨¡å¼ (-p)
4. âœ… æ¨¡å‹é€‰æ‹© (-m)
5. âœ… è¯¦ç»†æ¨¡å¼ (--verbose)
6. âœ… JSON è¾“å‡º
7. âœ… API å¯†é’¥éªŒè¯
8. âœ… è°ƒè¯•æ¨¡å¼ (-d)
9. âœ… å·¥ä½œç›®å½•
10. âœ… æ— æ•ˆå‚æ•°
11. âœ… çŸ­æ ‡å¿—
12. âœ… å‚æ•°ç»„åˆ

**è¿è¡Œ**: `npm run test:e2e:basic`

#### cli-session.test.ts (8 ä¸ªæµ‹è¯•)
æµ‹è¯•ä¼šè¯ç®¡ç†åŠŸèƒ½ï¼š
1. âœ… åˆ›å»ºæ–°ä¼šè¯
2. âœ… ä¿å­˜å†å²
3. âœ… æ¢å¤ä¼šè¯ (--resume)
4. âœ… åˆ—è¡¨ä¼šè¯
5. âœ… æŒ‡å®š ID æ¢å¤
6. âœ… è¿‡æœŸå¤„ç†
7. âœ… å·¥ä½œç›®å½•ä¿å­˜
8. âœ… æˆæœ¬ç»Ÿè®¡

**è¿è¡Œ**: `npm run test:e2e:session`

#### cli-tools.test.ts (11 ä¸ªæµ‹è¯•)
æµ‹è¯•å·¥å…·è°ƒç”¨ï¼š
1. âœ… Read å·¥å…·
2. âœ… Write å·¥å…·
3. âœ… Edit å·¥å…·
4. âœ… Bash å·¥å…·
5. âœ… Glob å·¥å…·
6. âœ… Grep å·¥å…·
7. âœ… TodoWrite å·¥å…·
8. âœ… å·¥å…·è¿‡æ»¤
9. âœ… å·¥å…·é»‘åå•
10. âœ… å¤šè½®è°ƒç”¨
11. âœ… WebFetch å·¥å…·

**è¿è¡Œ**: `npm run test:e2e:tools`

### è¾…åŠ©å·¥å…·

#### run-all.ts
**ç”¨é€”**: è¿è¡Œæ‰€æœ‰æµ‹è¯•å¥—ä»¶å¹¶ç”ŸæˆæŠ¥å‘Š

**åŠŸèƒ½**:
- ä¸²è¡Œè¿è¡Œæ‰€æœ‰æµ‹è¯•
- ç»Ÿè®¡é€šè¿‡/å¤±è´¥
- è®¡ç®—è€—æ—¶
- ç”Ÿæˆæ€»ç»“æŠ¥å‘Š

**è¿è¡Œ**: `npm run test:e2e`

#### example.test.ts (5 ä¸ªç¤ºä¾‹)
**ç”¨é€”**: æ¼”ç¤ºå¦‚ä½•ç¼–å†™æµ‹è¯•

**åŒ…å«ç¤ºä¾‹**:
1. ç®€å•æ–‡æœ¬å“åº”æµ‹è¯•
2. æ–‡ä»¶æ“ä½œæµ‹è¯•
3. äº¤äº’å¼ä¼šè¯æµ‹è¯•
4. è‡ªå®šä¹‰å“åº”å¤„ç†å™¨
5. è¯·æ±‚å†…å®¹éªŒè¯

**è¿è¡Œ**: `tsx tests/e2e/example.test.ts`

### æ–‡æ¡£

#### README.md (650 è¡Œ)
**æœ€å…¨é¢çš„æ–‡æ¡£**

åŒ…å«å†…å®¹:
- ç›®å½•ç»“æ„
- å¿«é€Ÿå¼€å§‹
- æ¡†æ¶ç»„ä»¶è¯¦è§£
- æµ‹è¯•æ–‡ä»¶è¯´æ˜
- ç¼–å†™æ–°æµ‹è¯•æ•™ç¨‹
- æ–­è¨€å‡½æ•°å‚è€ƒ
- Mock æœåŠ¡å™¨é…ç½®
- æµ‹è¯•æœ€ä½³å®è·µ
- è°ƒè¯•æŒ‡å—
- CI/CD é›†æˆ
- æ•…éšœæ’é™¤
- æ‰©å±•æ¡†æ¶

**é€‚åˆ**: æ·±å…¥å­¦ä¹ å’Œå‚è€ƒ

#### QUICK_START.md (150 è¡Œ)
**5 åˆ†é’Ÿå¿«é€Ÿå…¥é—¨**

åŒ…å«å†…å®¹:
- è¿è¡Œæµ‹è¯•
- ç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•
- å¸¸ç”¨æ¨¡å¼
- æ–­è¨€å‡½æ•°
- Mock æœåŠ¡å™¨
- è°ƒè¯•æŠ€å·§
- å¸¸è§é—®é¢˜

**é€‚åˆ**: å¿«é€Ÿä¸Šæ‰‹

#### IMPLEMENTATION.md (400 è¡Œ)
**æŠ€æœ¯å®ç°æŠ¥å‘Š**

åŒ…å«å†…å®¹:
- ä»»åŠ¡æ¦‚è¿°
- å®ç°å†…å®¹
- æ ¸å¿ƒ API
- ç»Ÿè®¡æ•°æ®
- ä½¿ç”¨æ–¹æ³•
- æŠ€æœ¯ç‰¹ç‚¹
- é›†æˆæŒ‡å—
- æœ€ä½³å®è·µ
- æ‰©å±•æŒ‡å—
- å·²çŸ¥é™åˆ¶
- æœªæ¥æ”¹è¿›

**é€‚åˆ**: äº†è§£æŠ€æœ¯ç»†èŠ‚å’Œæ¶æ„

## ç»Ÿè®¡æ•°æ®

### ä»£ç é‡
- **æ€»è¡Œæ•°**: ~2,940 è¡Œ
- **æ ¸å¿ƒæ¡†æ¶**: ~980 è¡Œ
- **æµ‹è¯•ä»£ç **: ~1,210 è¡Œ
- **æ–‡æ¡£**: ~1,200 è¡Œ

### æµ‹è¯•è¦†ç›–
- **æµ‹è¯•å¥—ä»¶**: 3 ä¸ª
- **æµ‹è¯•ç”¨ä¾‹**: 31 ä¸ª
- **ç¤ºä¾‹**: 5 ä¸ª
- **æ€»è®¡**: 36 ä¸ªæµ‹è¯•

### æ–‡ä»¶æ•°é‡
- **æ¡†æ¶æ–‡ä»¶**: 3 ä¸ª
- **æµ‹è¯•æ–‡ä»¶**: 4 ä¸ª
- **å·¥å…·æ–‡ä»¶**: 2 ä¸ª
- **æ–‡æ¡£æ–‡ä»¶**: 4 ä¸ª
- **æ€»è®¡**: 13 ä¸ªæ–‡ä»¶

## ä½¿ç”¨æµç¨‹

### 1ï¸âƒ£ æ–°æ‰‹å…¥é—¨
```
QUICK_START.md â†’ example.test.ts â†’ ç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•
```

### 2ï¸âƒ£ æ·±å…¥å­¦ä¹ 
```
README.md â†’ å„ä¸ªæ ¸å¿ƒæ–‡ä»¶ â†’ ç¼–å†™å¤æ‚æµ‹è¯•
```

### 3ï¸âƒ£ å‚è€ƒå®ç°
```
cli-*.test.ts â†’ å­¦ä¹ æµ‹è¯•æ¨¡å¼ â†’ åº”ç”¨åˆ°è‡ªå·±çš„æµ‹è¯•
```

### 4ï¸âƒ£ æ‰©å±•æ¡†æ¶
```
IMPLEMENTATION.md â†’ äº†è§£æ¶æ„ â†’ æ·»åŠ æ–°åŠŸèƒ½
```

## å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:e2e

# è¿è¡Œç‰¹å®šæµ‹è¯•
npm run test:e2e:basic
npm run test:e2e:session
npm run test:e2e:tools

# æ‰‹åŠ¨è¿è¡Œ
tsx tests/e2e/cli-basic.test.ts
tsx tests/e2e/run-all.ts
tsx tests/e2e/example.test.ts

# æ„å»ºé¡¹ç›®
npm run build

# å¼€å‘æ¨¡å¼
npm run dev
```

## ä¾èµ–å…³ç³»

```
package.json
  â””â”€â”€ scripts
      â”œâ”€â”€ test:e2e â†’ run-all.ts
      â”œâ”€â”€ test:e2e:basic â†’ cli-basic.test.ts
      â”œâ”€â”€ test:e2e:session â†’ cli-session.test.ts
      â””â”€â”€ test:e2e:tools â†’ cli-tools.test.ts

run-all.ts
  â”œâ”€â”€ cli-basic.test.ts
  â”œâ”€â”€ cli-session.test.ts
  â””â”€â”€ cli-tools.test.ts

*.test.ts
  â”œâ”€â”€ setup.ts
  â”œâ”€â”€ cli-runner.ts
  â””â”€â”€ mock-server.ts
```

## æœ€åæ›´æ–°

- **æ—¥æœŸ**: 2025-12-25
- **ç‰ˆæœ¬**: 1.0.0
- **çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

## ç›¸å…³é“¾æ¥

- [ä¸»é¡¹ç›®æ–‡æ¡£](../../README.md)
- [CLAUDE.md](../../CLAUDE.md)
- [å•å…ƒæµ‹è¯•](../config.test.ts)

---

**Happy Testing! ğŸ‰**
